# ファイルCRUD

## 表示

### ls

- `ls`コマンドは、ファイルの一覧を表示する。

  ```bash
  ls [ファイルまたはディレクトリ...]
  ```

- オプション

  | オプション | 概要                                          |
  | ---------- | --------------------------------------------- |
  | `-a`       | 隠しファイルを表示する。                      |
  | `-A`       | 隠しファイルを表示する。（`.`及び`..`を除く） |
  | `-d`       | ディレクトリ自体の情報を表示する。            |
  | `-l`       | ファイルの詳細を表示する。                    |

### find

- `find`コマンドは、ファイル・ディレクトリを検索する。

  ```bash
  find 検索対象パス [検索式]
  ```

- ファイル系検索式
  
  | 検索式                 | 概要                         |
  | ---------------------- | ---------------------------- |
  | `-name ファイル名`     | ファイル名により検索する。   |
  | `-type ファイルタイプ` | ファイルタイプを指定できる。 |
  
- タイムスタンプ系検索式
  
  | 検索式        | 概要                                                         |
  | ------------- | ------------------------------------------------------------ |
  | `-atime 日数` | 指定された日時より前に、最終アクセスされたものを検索する。   |
  | `-ctime 日数` | 指定された日時より前に、何らかの変更がなされたものを検索する。 |
  | `-mtime 日数` | 指定された日時より前に、ファイル内容の変更がなされたものを検索する。 |
  
- 権限系検索式
  
  | 検索式          | 概要                                         |
  | --------------- | -------------------------------------------- |
  | `-perm モード`  | モードに一致するものを検索する。             |
  | `-perm -モード` | モードが全て含まれているものを検索する。     |
  | `-perm /モード` | モードが一つ以上含まれているものを検索する。 |
  
- 深さ系検索式
  
    | 検索式           | 概要                                         |
  | ---------------- | -------------------------------------------- |
  | `-depth 深さ`    | 検索するディレクトリの深さを指定する。       |
  | `-mindepth 深さ` | 検索するディレクトリの深さの最小を指定する。 |
  | `-maxdepth 深さ` | 検索するディレクトリの深さの最大を指定する。 |
  
- その他検索式
  
  | 検索式              | 概要                                                         |
  | ------------------- | ------------------------------------------------------------ |
  | `-a, -and`          | AND条件を指定する。                                          |
  | `-o, -or`           | OR条件を指定する。                                           |
  | `-print`            | 見つけたファイルをフルパスで出力する。（デフォルト）         |
  | `-print0`           | 区切り文字をヌル文字にして出力する。<br />（結果をxargsに渡すときなどに使う） |
  | `-exec コマンド \;` | 見つけたファイルを引数としてコマンドを実行する。<br />（引数を入れる箇所に`{}`を指定する） |

### locate

- `locate`コマンドは、あらかじめ作成されたDBに基づいて、高速にファイルを検索する。

  ```bash
  locate 検索パターン
  ```

### updatedb

- `updatedb`コマンドは、`locate`コマンドで使うDBを更新する。

  ```bash
  updatedb
  ```

- 多くのディストリビューションでは、cronで定期的に実行される。
- `/etc/updatedb.conf`ファイルで、設定を変更できる。

### tree

- `tree`コマンドは、ファイルやディレクトリをツリー状に表示する。

  ```bash
  tree [ディレクトリ]
  ```

## パス名

### basename

- `basename`コマンドは、パスからファイル名部分を取得する。

  ```bash
  basename パス
  ```

- 2番目の引数を指定すると、接尾辞を除いて出力する。

  ```bash
  basename パス 接尾辞
  ```

### dirname

- `dirname`コマンドは、パスからディレクトリ名部分（末尾スラッシュを除く）を取得する。

  ```bash
  dirname パス
  ```

## 作成・削除

### touch

- `touch`コマンドは、ファイルのタイムスタンプを変更する。

  ```bash
  touch ファイル...
  ```

- `-t 日時`オプションで、タイムスタンプを指定できる。
  - 形式：`[[CC]YY]MMDDhhmm[.ss]`

### rm

- `rm`コマンドは、ファイルを削除する。（通常はディレクトリを削除できない）

  ```bash
  rm ファイル...
  ```

- `-r, -R, --recursive`オプションで、ディレクトリを再帰的に削除する。

### mkdir, rmdir

- `mkdir`コマンドは、空のディレクトリを作成する。

  ```bash
  mkdir ディレクトリ名
  ```

- `rmdir`コマンドは、**空の**ディレクトリを削除する。

  ```bash
  rmdir ディレクトリ名
  ```

- オプション
  
  | オプション         | 概要                                                         |
  | ------------------ | ------------------------------------------------------------ |
  | `-p, --parents`    | 必要に応じて親ディレクトリも作成・削除する。<br />ディレクトリが既に存在する場合でも、エラーを吐かなくなる。 |
  | `-m, -mode モード` | 作成するディレクトリの権限を指定する。                       |

### mktemp

- `mktemp`コマンドは、適当な名前の空ファイルを作成する。

  ```bash
  mktemp テンプレート文字列
  ```

- `-d`オプションで、ファイルではなくディレクトリを作成する。

## 移動・コピー

### mv

- `mv`コマンドは、ファイルを移動またはリネームする。

  ```bash
  mv 移動元 移動先
  ```

- 上書き系オプション（いずれか一つのみ有効）
  
  | オプション          | 概要                                                         |
  | ------------------- | ------------------------------------------------------------ |
  | `-f, --force`       | 移動先に同名ファイルがあった場合に、上書きする。（デフォルト） |
  | `-i, --interactive` | 移動先に同名ファイルがあった場合に、確認する。               |
  | `-n, --no-clobber`  | 移動先に同名ファイルがあった場合に、上書きしない。           |
  
- 移動元・移動先の両方がディレクトリの場合
  - 移動先ディレクトリが存在しない場合は、**ディレクトリのリネーム**となる。
  - 移動先ディレクトリが存在する場合は、**その中に移動**となる。
  - 移動元・移動先に同名のディレクトリを指定すると、（`ディレクトリ名/ディレクトリ名`に移動しようとして）エラーとなる。

### cp

- `cp`コマンドは、ファイルをコピーする。

  ```bash
  cp [コピー元...] コピー先
  ```

- オプション

  | オプション | 概要                                                         |
  | ---------- | ------------------------------------------------------------ |
  | `-r`       | ディレクトリをコピーする。                                   |
  | `-p`       | ファイルのパーミッション・所有者・タイムスタンプを保ったままコピーする。 |

### rename

- `rename`コマンドは、ファイルを（まとめて）リネームする。

  ```bash
  rename s/置換前/置換後/ [ファイル名...]
  ```

- パスに含まれるディレクトリ名も、置換対象に含まれる。

## その他

### split

- `split`コマンドは、指定された行ごとにファイルを分割する。

  ```bash
  split [入力ファイル名 [出力ファイル名]
  ```

- `-行数`オプションで、分割する行数を指定できる。（デフォルトは1000行）

- 分割されたファイル名末尾には、`aa`, `ab`などが付与される。
