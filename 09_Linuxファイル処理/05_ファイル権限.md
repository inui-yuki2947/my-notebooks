# ファイル権限

## 所有者管理

### 共通

- `-R`オプションで、指定したディレクトリ及びその中のファイル全てを対象とする。

### 所有者の決定

- 新規ファイル・ディレクトリ作成時は、
  それを作成したユーザー及びそのプライマリグループが、所有者・所有グループとなる。

### chown

- `chown`コマンドは、ファイルの所有者を変更する。

  ```bash
  chown 新しい所有者 ファイル名...
  ```

- 所有者と所有グループを同時に変更することもできる。

  ```bash
  chown 新しい所有者:新しい所有グループ ファイル名...
  ```

- 当コマンドは、rootユーザーのみ実行できる。
- 所有者は、ユーザー名またはユーザーIDで指定する。

### chgrp

- `chgrp`コマンドは、ファイルの所有グループを変更する。

  ```bash
  chgrp 新しい所有グループ ファイル名...
  ```

- 一般ユーザーは、変更前後のグループ両方に属している場合のみ変更できる。

## ファイル権限管理

### ディレクトリの権限

- 読み取り権限があると、ディレクトリ内の内容を参照できる。（`ls`, `find`など）
- 書き込み権限があると、ディレクトリ内ファイルの作成・変更・削除ができる。（`touch`, `mv`, `rm`など）
- 実行権限があると、ディレクトリへの移動ができる。（`cd`）
- 読み取り・実行権限があると、IntelliJでディレクトリ内ファイルが表示される。

### chmod

- `chmod`コマンドは、ファイルの権限を変更する。

  ```bash
  chmod モード ファイル名
  ```

### chmod（数字指定）

- 書式

  ```bash
  chmod 744 ファイル名
  ```

- 権限の指定順
  - ファイルの所有者
  - ファイルのグループ
  - その他
- 権限の数値表現
  - 4：読み取り
  - 2：書き込み
  - 1：実行

### chmod（アルファベット指定）

- 書式

  ```bash
  chmod 対象・操作・許可の種別 ファイル名
  ```

- 例

  ```bash
  chmod g+x ファイル名
  ```

- 対象を`a`とするか指定しなかった場合は、全てが対象となる。
- モードは、カンマ区切りで複数指定できる。

  ```bash
  chmod g+x,o+x ファイル名
  ```

## その他

### 特殊なアクセス権

|項目|概要|アルファベット表記|数値表記|
|---|---|---|---|
|SUID（Set User ID）|ファイル実行時、所有者の権限で実行される。|`u+s`|`4000`|
|SGID（Set Group ID）|ファイル実行時、所有グループの権限で実行される。|`g+s`|`2000`|
|スティッキービット|所有者とrootユーザーのみ、ファイルのリネームや削除ができる。|`o+t`|`1000`|

### umask

- `umask`コマンドは、umask値の設定を行う。

  ```bash
  umask マスク値
  ```

- ファイルは`666`から、ディレクトリは`777`からumask値を引いた値が、デフォルトのアクセス権として設定される。
- umask値のデフォルトは、CentOSは`002`、Ubuntu, Macは`022`である。
