# 圧縮・解凍

## ファイルの圧縮・解凍

### gzip, bzip2, xz

- 比較

  |コマンド|圧縮率|速度|拡張子|備考|
  |---|---|---|---|---|
  |`gzip, gunzip [ファイル名...]`|低|速い|`.gz`|Linuxでよく使う。|
  |`bzip2, bunzip2 [ファイル名...]`|中|普通|`.bz2`||
  |`xz, unxz [ファイル名...]`|高|遅い|`.xz`||

- オプション

  | オプション         | 概要                                                       |
  | ------------------ | ---------------------------------------------------------- |
  | `-d, --decompress` | ファイルを解凍する。                                       |
  | `-k, --keep`       | 元のファイルを削除しない。（デフォルトでは削除される）     |
  | `-r`               | ディレクトリ内のファイルをそれぞれ圧縮する。               |
  | `-c`               | 元ファイルは残したまま、標準出力に圧縮ファイルを出力する。 |

### zip

- コマンド

  |コマンド|概要|
  |---|---|
  |`zip ZIPファイル名 [対象ファイル名]`|ファイルをZIP形式で圧縮する。|

- コマンド

  |コマンド|概要|
  |---|---|
  |`unzip ZIPファイル名 対象ファイル名`|ファイルをZIP形式で解凍する。|

## アーカイブの作成・展開

### アーカイブファイル

- アーカイブファイルとは、複数のファイルを1つにまとめたファイルである。
- アーカイブファイル名は、gzip形式の場合、`.tar.gz`または`.tgz`である。
- `file`コマンドで、アーカイブファイルの圧縮形式を確認できる。

### tar

- `tar`コマンドは、アーカイブファイルの管理を行う。

  | コマンド                                   | 概要                                         |
  | ------------------------------------------ | -------------------------------------------- |
  | `tar -c, --create 元ファイル名`            | アーカイブを作成する。                       |
  | `tar -x, --extract [検索する元ファイル名]` | アーカイブを展開する。                       |
  | `tar -t, --list [検索する元ファイル名]`    | アーカイブに含まれるファイル一覧を表示する。 |

- オプション

  | オプション                        | 概要                                       |
  | --------------------------------- | ------------------------------------------ |
  | `-z, --gzip`                      | gzip形式で圧縮・解凍する。                 |
  | `-j, --bzip2`                     | bzip2形式で圧縮・解凍する。                |
  | `-v, --verbose`                   | 詳細情報を表示する。                       |
  | `-f, --file アーカイブファイル名` | アーカイブファイルを指定する。（ほぼ必須） |

### cpio

- コマンド

  |コマンド|概要|
  |---|---|
  |`cpio フラグ [オプション]`|アーカイブファイルとの間で、ファイルをコピーする。|

- フラグ
  
  | フラグ | 概要                                                         |
  | ------ | ------------------------------------------------------------ |
  | `-i`   | ファイルをアーカイブファイルからコピーする。（コピーインモード） |
  | `-o`   | ファイルをアーカイブファイルにコピーする。（コピーアウトモード） |
  | `-p`   | ファイルを別ディレクトリにコピーする。（コピーパスモード）   |

### dd

- `dd`コマンドは、ファイルをブロック単位で読み出し、指定通り変換して出力する。
  （ハードディスクやCD-ROMなどのデバイスの内容を、そのまま取り扱える）
  
  ```bash
  dd
  ```
  
- オプション

  | オプション          | 概要                     |
  | ------------------- | ------------------------ |
  | `if=入力ファイル名` | 入力ファイルを指定する。 |
  | `of=出力ファイル名` | 出力ファイルを指定する。 |

## 解凍をラップしたコマンド

### 概要

- 下記コマンドは、gzip形式で圧縮したファイルに対して、`z`を除いたコマンドを実行できる。
  - zcat
  - zless
  - zmore
  - zgrep
  - zcmp
  - zdiff
- bzip2形式やxz形式のファイルについては、`bzcat`や`xzcat`コマンドが利用できる。
