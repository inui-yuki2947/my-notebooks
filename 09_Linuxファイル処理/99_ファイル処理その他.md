# ファイル処理その他

## リンク

### ハードリンクとソフトリンク

|項目|リンク先|元のパスが変わると|ディレクトリ・別ファイルシステムへのリンク|パーミッションの表示|
|---|---|---|---|---|
|ハードリンク|iノード|影響はない|作成できない|オリジナルと同じ|
|ソフトリンク（シンボリックリンク）|ファイルパス|アクセスできなくなる|作成できる|デフォルト（実際にはオリジナルが適用）|

### ln

- `ln`コマンドは、リンクを作成する。

  ```bash
  ln オリジナル リンク名
  ```

- デフォルトではハードリンクを作成するが、`-s`オプションでシンボリックリンクを作成する。

- `-f|--force`オプションで、リンクファイルと同じ名前のファイルがあっても、強制的に上書きする。

### その他

- `ls`コマンドで、ハードリンクが作成されている数を確認できる。
- `ls -i`コマンドで、iノード番号を確認できる。
- `cp`コマンドは、シンボリックリンクのリンク元をコピーするが、
  `-d`オプションで、シンボリックリンク自体をコピーできる。

## ファイル比較

### diff

- `diff`コマンドは、2つのファイルを比較し、差分を表示する。

  ```bash
  diff ファイル1 ファイル2
  ```

### comm

- `comm`コマンドは、2つのファイルを比較し、「ファイル1のみにある行、ファイル2のみにある行、両方にある行」を3列で表示する。

  ```bash
  comm ファイル1 ファイル2
  ```

### cmp

- `cmp`コマンドは、2つのファイルをバイト単位で比較する。

  ```bash
  cmp ファイル1 ファイル2
  ```

### patch

- `patch`コマンドは、テキストファイルに差分を適用する。

- 単一ファイルについてのパッチを適用する場合

  ```bash
  patch 元のファイル 差分ファイル
  ```

- 複数ファイルについてのパッチを適用する場合

  ```bash
  patch < 差分ファイル
  ```

- `-p 個数`オプションで、差分ファイルから、指定した個数分のパス指定を取り除く。

## 容量

### iノード

- 作成できるiノードの数は、ファイルシステム作成時に設定され、あとから変更はできない。
- iノードが枯渇すると、ファイルを新規保存できなくなる。

### df

- `df`コマンドは、ファイルシステムの空き容量を表示する。

  ```bash
  df [デバイス名やディレクトリ名]
  ```

### du

- `du`コマンドは、ファイルやディレクトリが占めている容量を表示する。

  ```bash
  du [ファイル名やディレクトリ名]
  ```

- 表示系オプション
  - `-a`オプションで、ディレクトリだけでなく、ファイルのディスク使用量も表示する。
  - `-s`オプションで、サブディレクトリの情報を非表示にする。
  - `-S`オプションで、サブディレクトリの容量を含めない。
- 表示形式系オプション
  - `-h`オプションで、人間に分かりやすい単位で容量を表示する。
  - `-i`オプションで、空き容量の代わりに、iノードの使用状況について表示する。
