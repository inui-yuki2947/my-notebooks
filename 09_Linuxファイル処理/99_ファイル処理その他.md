# ファイル処理その他

## リンク

### ハードリンクとソフトリンク

- 比較

  |項目|リンク先|元のパスが変わると|ディレクトリ・別ファイルシステムへのリンク|パーミッションの表示|
  |---|---|---|---|---|
  |ハードリンク|iノード|影響はない|作成できない|オリジナルと同じ|
  |ソフトリンク（シンボリックリンク）|ファイルパス|アクセスできなくなる|作成できる|デフォルト（実際にはオリジナルが適用）|

### ln

- コマンド

  |コマンド|概要|
  |---|---|
  |`ln オリジナル リンク名`|リンクを作成する。|

- オプション

  | オプション    | 概要                                                         |
  | ------------- | ------------------------------------------------------------ |
  | `-s`          | シンボリックリンクを作成する。（デフォルトはハードリンク）   |
  | `-f, --force` | リンクファイルと同じ名前のファイルがあっても、強制的に上書きする。 |

### その他

- `ls`コマンドで、ハードリンクが作成されている数を確認できる。
- `ls -i`コマンドで、iノード番号を確認できる。
- `cp`コマンドは、シンボリックリンクのリンク元をコピーするが、
  `-d`オプションで、シンボリックリンク自体をコピーできる。

## ファイル比較

### diff, comm, cmp

- コマンド

  | コマンド                   | 概要                                                         |
  | -------------------------- | ------------------------------------------------------------ |
  | `diff ファイル1 ファイル2` | 2つのファイルの差分を表示する。                              |
  | `comm ファイル1 ファイル2` | 「ファイル1のみにある行、ファイル2のみにある行、両方にある行」を3列で表示する。 |
  | `cmp ファイル1 ファイル2`  | 2つのファイルをバイト単位で比較する。                        |

### patch

- コマンド

  | コマンド                          | 概要                                     |
  | --------------------------------- | ---------------------------------------- |
  | `patch 元のファイル 差分ファイル` | 単一ファイルについてのパッチを適用する。 |
  | `patch < 差分ファイル`            | 複数ファイルについてのパッチを適用する。 |

- オプション

  |オプション|概要|
  |---|---|
  |`-p 個数`|差分ファイルから、指定した個数分のパス指定を取り除く。|

## 容量

### iノード

- 作成できるiノードの数は、ファイルシステム作成時に設定され、あとから変更はできない。
- iノードが枯渇すると、ファイルを新規保存できなくなる。

### df

- コマンド

  |コマンド|概要|
  |---|---|
  |`df [デバイス名やディレクトリ名]`|ファイルシステムの空き容量を表示する。|

### du

- コマンド

  |コマンド|概要|
  |---|---|
  |`du [ファイル名やディレクトリ名]`|ファイルやディレクトリが占めている容量を表示する。|

- オプション（表示系）
  
  | オプション | 概要                                                         |
  | ---------- | ------------------------------------------------------------ |
  | `-a`       | ディレクトリだけでなく、ファイルのディスク使用量も表示する。 |
  | `-s`       | サブディレクトリの情報を非表示にする。                       |
  | `-S`       | サブディレクトリの容量を含めない。                           |
  
- オプション（表示形式系）
  
  | オプション | 概要                                                    |
  | ---------- | ------------------------------------------------------- |
  | `-h`       | 人間に分かりやすい単位で容量を表示する。                |
  | `-i`       | 空き容量の代わりに、iノードの使用状況について表示する。 |
