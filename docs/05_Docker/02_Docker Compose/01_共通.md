# Docker/Docker Compose/共通

## 共通

### 概要

- Docker Composeとは、複数のコンテナを定義し実行するツール。
- Docker Composeでは、ネットワークが自動生成される。
- プロジェクト名は通常、`docker-compose.yml`ファイルが存在するディレクトリ名となる。

## インストール

- Docker DesktopにはDocker Composeが同梱されている。
- Linuxなどでは、Docker Composeのインストールは、Dockerのインストールとは別に行う必要がある。

## docker-compose

### コマンド

| コマンド                                       | 概要                                                         |
| ---------------------------------------------- | ------------------------------------------------------------ |
| `docker-compose version`                       | Docker Composeのバージョンを表示する。                       |
| `docker-compose --help`                        | Docker Composeのヘルプを表示する。                           |
| `docker-compose build [サービス1 ...]`         | 指定したサービス用コンテナ（省略時は全て）をビルドする。     |
| `docker-compose up [サービス1 ...]`            | 指定したサービス用コンテナ（省略時は全て）を起動する。       |
| `docker-compose down`                          | 全てのサービス用コンテナを終了する。                         |
| `docker-compose exec サービス コマンド [引数]` | 指定したサービスで、指定したコマンドを実行する。             |
| `docker-compose logs [サービス1 ...]`          | 指定したサービス用コンテナ（省略時は全て）のログを表示する。 |

### オプション

| コマンド | オプション     | 概要                                                         |
| -------- | -------------- | ------------------------------------------------------------ |
| `up`     | `-d, --detach` | バックグラウンド実行となる。                                 |
| `up`     | `--build`      | コンテナ起動前にイメージを（再）構築する。<br />デフォルトでは、イメージが既に構築されている場合、<br />（その後`Dockerfile`が変更されていても）イメージは再構築されない。 |
| `down`   | `--volumes`    | 使用したボリュームも削除できる。                             |
