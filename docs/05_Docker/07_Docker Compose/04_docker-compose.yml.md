# Docker/Docker Compose/docker-compose.yml

## 共通

### 概要

- Docker Composeを使うことで、`docker container run`コマンドの引数などをコードとして定義できる。

### ファイル

| ファイル             | 概要                                     |
| -------------------- | ---------------------------------------- |
| `docker-compose.yml` | Docker Composeの設定を記述するファイル。 |

### 例

```yml
services:
  frontend:
    image: awesome/webapp
    build: ./webapp

  backend:
    image: awesome/database
    build:
      context: backend
      dockerfile: ../backend.Dockerfile

  custom:
    build: ~/custom
```

### 参考資料

- [Compose Specification（仕様） — Docker-docs-ja 20.10 ドキュメント](https://docs.docker.jp/compose/compose-file/index.html)

## version

### プロパティ

| 記法      | 概要         |
| --------- | ------------ |
| `version` | バージョン。 |

## services

### プロパティ

| 記法                  | 型             | 概要                         |
| --------------------- | -------------- | ---------------------------- |
| `services`            | オブジェクト型 | サービス（コンテナ）の一覧。 |
| `services.サービス名` | オブジェクト型 | サービス（コンテナ）。       |

## services.サービス名.build

### プロパティ

| 記法                        | 型                           | 概要                                                         |
| --------------------------- | ---------------------------- | ------------------------------------------------------------ |
| `services.サービス名.build` | 文字列型<br />オブジェクト型 | イメージの構築情報。<br />構築コンテクストへのパスを文字列で指定するか、<br />詳細な情報をオブジェクトで指定する。 |

## services.サービス名.image

### プロパティ

| 記法                        | 型       | 概要                               |
| --------------------------- | -------- | ---------------------------------- |
| `services.サービス名.image` | 文字列型 | コンテナの元となるイメージの情報。 |

## services.サービス名.depends_on

### プロパティ

| 記法                             | 型             | 概要                           |
| -------------------------------- | -------------- | ------------------------------ |
| `services.サービス名.depends_on` | 文字列の配列型 | 依存関係があるサービスの一覧。 |

## services.サービス名.ports

### プロパティ

| 記法                        | 型             | 概要                   |
| --------------------------- | -------------- | ---------------------- |
| `services.サービス名.ports` | 文字列の配列型 | 公開するポートの一覧。 |

## services.サービス名.volumes

### プロパティ

| 記法                          | 型                                 | 概要                       |
| ----------------------------- | ---------------------------------- | -------------------------- |
| `services.サービス名.volumes` | 文字列の配列型<br />オブジェクト型 | 使用するボリュームの一覧。 |

- 文字列型の場合は、`ホスト側の相対パス:コンテナの絶対パス:アクセスモード`の形式で指定する。
- `run`コマンドと違い、ボリュームは自動生成されない。

## services.サービス名.command

### プロパティ

| 記法                          | 型                           | 概要                                                         |
| ----------------------------- | ---------------------------- | ------------------------------------------------------------ |
| `services.サービス名.command` | 文字列型<br />文字列の配列型 | イメージによって宣言済みのデフォルトコマンドを上書きするコマンド。 |
