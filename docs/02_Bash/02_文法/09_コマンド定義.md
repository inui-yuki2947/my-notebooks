# Bash/文法/コマンド定義

## 共通

### 定義方法

| 定義方法         | 引数の使用 | シェルスクリプトでの使用 | 実行環境       | 適する用途                                             |
| ---------------- | ---------- | ------------------------ | -------------- | ------------------------------------------------------ |
| エイリアス       | できない※   | できない                 | カレントシェル | 対話的環境でよく実行するコマンド                       |
| 関数             | できる     | できない                 | カレントシェル | 対話的環境でよく実行する、エイリアスより複雑なコマンド |
| シェルスクリプト | できる     | できる                   | サブシェル     | カレントシェルに影響を与えたくないコマンド             |

- ※ エイリアスは、単純にエイリアスを登録した表現に置換するだけのため、後ろに引数を続けるだけならできる。

- [When to Use an Alias vs Script vs a New Function in Bash | Baeldung on Linux](https://www.baeldung.com/linux/bash-alias-vs-script-vs-new-function)

- [In Bash, when to alias, when to script, and when to write a function? - Unix & Linux Stack Exchange](https://unix.stackexchange.com/questions/30925/in-bash-when-to-alias-when-to-script-and-when-to-write-a-function)

## alias, unalias

### コマンド

| コマンド                      | 概要                                 |
| ----------------------------- | ------------------------------------ |
| `alias`                       | コマンドのエイリアス一覧を表示する。 |
| `alias エイリアス名=コマンド` | コマンドのエイリアスを登録する。     |
| `unalias エイリアス名`        | コマンドのエイリアスを削除する。     |
| `unalias -a`                  | コマンドのエイリアスを全て削除する。 |

### エイリアスの無視

- コマンド名の1文字目がクォートされていると、エイリアスは適用されない。

  ```bash
  \コマンド
  ```

## function

### コマンド（定義）

- `function`コマンドは、関数を定義する。

  ```bash
  [function] 関数名() { 
    処理
  }
  ```

### 変数

| 変数          | 概要                   |
| ------------- | ---------------------- |
| `$1, $2, ...` | 関数に与えられた引数。 |
| `FUNCNAME`    | 関数名。               |

### コマンド（呼び出し）

| コマンド                 | 概要                                                   |
| ------------------------ | ------------------------------------------------------ |
| `関数名 引数1 引数2 ...` | 関数を呼び出す。（関数定義を先に書いておく必要がある） |

### コマンド（その他）

| コマンド           | 概要                     |
| ------------------ | ------------------------ |
| `export -f 関数名` | 関数をエクスポートする。 |

## シェルスクリプト

### シバン

- 直接指定する場合

  ```bash
  #!/bin/bash
  ```

- 環境変数`PATH`をもとに指定する場合

  ```bash
  #!/usr/bin/env ruby
  ```

- シバンは、ファイルを直接実行する場合のみ読み込まれる。

### その他

- シェルスクリプトのカレントディレクトリは、それを呼び出した際のカレントディレクトリとなるので、
  以下でシェルスクリプトのカレントディレクトリを統一すると便利。

  ```bash
  cd "$(dirname "$0")" || exit
  ```
