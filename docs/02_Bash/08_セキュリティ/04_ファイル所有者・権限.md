# Bash/セキュリティ/ファイル所有者・権限

## chown

### コマンド

|コマンド|概要|
|---|---|
|`chown 新しい所有者[:新しい所有グループ] ファイル名...`|ファイルの所有者・所有グループを変更する。|

### オプション

|オプション|概要|
|---|---|
|`-R`|指定したディレクトリ及びその中のファイル全てを対象とする。|

## chgrp

### コマンド

| コマンド                                 | 概要                               |
| ---------------------------------------- | ---------------------------------- |
| `chgrp 新しい所有グループ ファイル名...` | ファイルの所有グループを変更する。 |

### その他

- 一般ユーザーは、変更前後のグループ両方に属している場合のみ変更できる。

## ファイル・ディレクトリ権限

### ディレクトリ権限

| 権限         | 概要                                               | 使用可能になるコマンド例 |
| ------------ | -------------------------------------------------- | ------------------------ |
| 読み取り権限 | ディレクトリ内の内容を参照できる。                 | `ls`, `find`             |
| 書き込み権限 | ディレクトリ内ファイルの作成・変更・削除ができる。 | `touch`, `mv`, `rm`      |
| 実行権限     | ディレクトリへの移動ができる。                     | `cd`                     |

- 読み取り・実行権限があると、IntelliJでディレクトリ内ファイルが表示される。

### 特殊な権限

| 権限                 | 概要                                                         | アルファベット表記 | 数値表記 |
| -------------------- | ------------------------------------------------------------ | ------------------ | -------- |
| SUID（Set User ID）  | ファイル実行時、所有者の権限で実行される。                   | `u+s`              | `4000`   |
| SGID（Set Group ID） | ファイル実行時、所有グループの権限で実行される。             | `g+s`              | `2000`   |
| スティッキービット   | 所有者とrootユーザーのみ、ファイルのリネームや削除ができる。 | `o+t`              | `1000`   |

## chmod

### コマンド

|コマンド|概要|例|
|---|---|---|
|`chmod <所有者の権限><グループの権限><その他ユーザーの権限> ファイル名`|ファイルの権限を変更する。|`chmod 744 ファイル名`|
|`chmod [対象]<=,+,-,><許可の種別>[,...] ファイル名`|ファイルの権限を変更する。|`chmod g+x ファイル名`<br />`chmod g+x,o+x ファイル名`|

- 対象を`a`とするか指定しなかった場合は、全てが対象となる。

## umask

### コマンド

|コマンド|概要|
|---|---|
|`umask マスク値`|umask値の設定を行う。|

### その他

- ファイルは`666`から、ディレクトリは`777`からumask値を引いた値が、デフォルトのアクセス権として設定される。
- umask値のデフォルトは、CentOSは`002`、Ubuntu, Macは`022`である。
