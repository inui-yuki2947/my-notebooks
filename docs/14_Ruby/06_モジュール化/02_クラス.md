# Ruby/モジュール化/クラス

## 作成

### 書式

| 書式                                         | 概要                           |
| -------------------------------------------- | ------------------------------ |
| `class クラス名 内容 end`                    | クラスを定義する。             |
| `class クラス名 < スーパークラス名 内容 end` | 継承を行ったクラスを定義する。 |

### オープンクラス

- 既存のクラス・モジュールに対して内容を定義することで、クラス・モジュールを拡張することが可能。（オープンクラス）
  [[Ruby] メタプログラミングの入り口、オープンクラスを理解する - Qiita](https://qiita.com/kidach1/items/b1672f1c16e2d15f2d9c)

## 変数・定数

### 書式

| 書式                                                         | 概要                                                   |
| ------------------------------------------------------------ | ------------------------------------------------------ |
| `@変数名`                                                    | インスタンス変数。                                     |
| `@@変数名`                                                   | クラス変数。<br />クラス直下で初期化を行う必要がある。 |
| `定数名`（クラス内部）<br />`クラス名::定数名`（クラス外部） | クラス定数。<br />クラス直下で初期化を行う必要がある。 |

### 書式（アクセスメソッド）

| 書式                          | 概要                                                         |
| ----------------------------- | ------------------------------------------------------------ |
| `attr_reader :変数名1, ...`   | 指定したインスタンス変数を、外部から読み取り可能にする。     |
| `attr_writer :変数名1, ...`   | 指定したインスタンス変数を、外部から書き込み可能にする。     |
| `attr_accessor :変数名1, ...` | 指定したインスタンス変数を、外部から読み取り・書き込み可能にする。 |

- `インスタンス変数名`, `インスタンス変数=`メソッドを定義することで、インスタンス変数のアクセスを許可することも可能。

## インスタンスメソッド

### 書式

| 書式                                  | 概要                             |
| ------------------------------------- | -------------------------------- |
| `def メソッド名(引数1, ...) 処理 end` | インスタンスメソッドを定義する。 |
| `def initialize(引数1, ...) 処理 end` | コンストラクタを定義する。       |

### 書式（アクセス制限）

| 書式                               | 概要                                   |
| ---------------------------------- | -------------------------------------- |
| `アクセス修飾子 :メソッド名1, ...` | 指定したメソッドのアクセスを制限する。 |
| `アクセス修飾子`                   | 以降の全メソッドのアクセスを制限する。 |

### アクセス修飾子

| アクセス修飾子 | 概要                                                         |
| -------------- | ------------------------------------------------------------ |
| `public`       | クラス内・サブクラス・クラス外で呼び出し可能。（未指定時のデフォルト） |
| `protected`    | クラス内・サブクラスで呼び出し可能。                         |
| `private`      | クラス内で呼び出し可能。                                     |

## クラスメソッド

- 特異クラス定義書式1

  ```ruby
  class << クラス名
    def メソッド名(引数1, 引数2, ...)
      処理
    end
  end
  ```

- 特異クラス定義書式2

  ```ruby
  class クラス名
    class << self
      def メソッド名(引数1, 引数2, ...)
        処理
      end
    end
  end
  ```

- 書式1

  ```ruby
  def クラス名.メソッド名(引数1, 引数2, ...)
    処理
  end
  ```

- 書式2

  ```ruby
  class クラス名
    def self.メソッド名(引数1, 引数2, ...)
      処理
    end
  end
  ```

## メソッド呼び出し

### 書式

| 書式                     | 概要                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `self`                   | メソッドのレシーバ。                                         |
| `メソッド名(引数1, ...)` | インスタンスメソッドを呼び出す。（`self.メソッド名(引数1, ...)`と同義）<br />ただし`変数名=`メソッドを除く。 |
| `super(引数1, ...)`      | 現在のメソッドがオーバーライドしているメソッドを呼び出す。   |

## インスタンス化

### 書式

| 書式                       | 概要                             |
| -------------------------- | -------------------------------- |
| `クラス名.new(引数1, ...)` | クラスのインスタンスを生成する。 |
