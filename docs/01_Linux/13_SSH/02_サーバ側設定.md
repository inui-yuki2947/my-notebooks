# Linux/SSH/サーバ側設定

## /etc/ssh/sshd_config

### ファイル

| ファイル               | 概要                    |
| ---------------------- | ----------------------- |
| `/etc/ssh/sshd_config` | SSHサーバの設定を行う。 |

### 例

```text
Port 10022
PermitRootLogin no
PasswordAuthentication no 
ChallengeResponseAuthentication no
PubkeyAuthentication yes
```

### 設定の反映

```bash
sudo systemctl restart sshd
```

## ~/.ssh/authorized_keys

### ファイル

| ファイル                 | 概要                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `~/.ssh/authorized_keys` | サーバー側で、公開鍵を記載するファイル。<br />パーミッションは、`600`に設定しておくべき。 |

### 書式

```text
ssh-rsa 公開鍵1
ssh-rsa 公開鍵2
...
```

### 例

- アクセス元を制限する場合

  ```text
  from=アクセス元 ssh-rsa 公開鍵
  ```

- 実行できるコマンドを制限する場合

  ```text
  command=コマンド ssh-rsa 公開鍵
  ```

## ssh-copy-id

### コマンド

| コマンド                          | 概要                             |
| --------------------------------- | -------------------------------- |
| `ssh-copy-id [ユーザー名@]接続先` | 簡単に公開鍵を接続先に登録する。 |

### オプション

| オプション          | 概要                                   |
| ------------------- | -------------------------------------- |
| `-i 公開鍵ファイル` | コピーする公開鍵ファイルを指定できる。 |
