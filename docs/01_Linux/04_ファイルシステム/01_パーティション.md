# Linux/ファイルシステム/パーティション

## 共通

### 概要

- Linuxでは、ハードディスクをいくつかの**パーティション**に分割して利用する。
- `/home, /usr, /var, /opt`ディレクトリは、別パーティションに分割するべき。
- システムによっては、ディスクの先頭パーティションとして、数100MB程度を`/boot`パーティションに割り当てたほうがよい場合がある。
- UEFIを使ったシステムでは、FATファイルシステムでフォーマットされた、EFIシステムパーティション（ESP）が必要である。
- 最近では、LVMと呼ばれるディスク管理が行われることもある。

### パーティションの種類

- ディスクには最大4個の基本パーティションを作成できる。（`/dev/sda1~4`）
- 基本パーティションのうちの一つを、拡張パーティションにすることができる。
- 論理パーティションは、拡張パーティションの中に作成されたパーティションのこと。（`/dev/sda5~`）

### スワップ領域

- スワップ領域は、仮想メモリ（物理メモリが不足した場合のメモリの延長）として利用される。
- サイズの目安は、物理メモリの1〜2倍程度。

### MBRとGPT

| 方式                              | 概要                               |
| --------------------------------- | ---------------------------------- |
| MBR（マスターブートレコード）     | 従来のパーティションテーブルの方式 |
| GPT（GUIDパーティションテーブル） | 新しいパーティションテーブルの方式 |

## fdisk, gdisk, parted

### コマンド

| コマンド                              | 概要                                             |
| ------------------------------------- | ------------------------------------------------ |
| `fdisk デバイス名`                    | MBR方式のパーティションで、管理を対話的に行う。  |
| `gdisk デバイス名`                    | GPT方式のパーティションで、管理を対話的に行う。  |
| `parted デバイス名 [-s サブコマンド]` | MBR, GPT方式両方のパーティションで、管理を行う。 |

### オプション（`fdisk, gdisk`）

|オプション|概要|
|---|---|
|`-l`|そのデバイスのパーティションテーブルの状態を表示する。|
