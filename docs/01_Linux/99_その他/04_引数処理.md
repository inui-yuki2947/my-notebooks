# Linux/その他/引数処理

## set, shift

### コマンド

| コマンド      | 概要                                               |
| ------------- | -------------------------------------------------- |
| `set 引数...` | 位置パラメータを上書き設定する。                   |
| `shift`       | 位置パラメータの番号を、1つだけ前にずらす。        |
| `shift 数字`  | 位置パラメータの番号を、指定した数だけ前にずらす。 |

## getopts

### コマンド

| コマンド                                          | 概要                                                         |
| ------------------------------------------------- | ------------------------------------------------------------ |
| `getopts 短いオプションとなる文字列 代入先の変数` | 呼び出す度に位置パラメータを順に解析し、解析結果を変数に代入する。 |

### 環境変数

| 環境変数 | 概要                                                         |
| -------- | ------------------------------------------------------------ |
| `OPTIND` | 次に解析を行うインデックス（1始まり）                        |
| `OPTARG` | オプション引数<br />（短いオプション文字の後に`:`をつけた場合に代入される） |

### その他

- オプションが見つからない場合は、終了ステータス`1` を返す。
- 不正なオプションが指定された、あるいはオプション引数が必要なのに指定されなかった場合は、変数に`?` が代入される。

### 例

```bash
while getopts ab: opt; do
  case $opt in
    a) 処理1;;
    b) 処理2;;
    *) exit 1;;
  esac
done
shift $((OPTIND - 1))
```

## getopt

### コマンド

| コマンド                                            | 概要                                                   |
| --------------------------------------------------- | ------------------------------------------------------ |
| `getopt [-o] 短いオプション文字列 解析したい文字列` | 文字列を解析し、オプション・引数に分けて標準出力する。 |

### その他

- `getopt`は高機能であるが外部コマンドであるため、環境を選ばず利用したい場合は`getopts`を利用するとよい。
- 短いオプション文字の後に`:`をつけると、引数を取るオプションとして解析する。

### 例

```bash
getopt ab:c -a -b hoge -c fuga
```
