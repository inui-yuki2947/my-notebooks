# Linux/設定/日時

## cal

### コマンド

| コマンド           | 概要                                   |
| ------------------ | -------------------------------------- |
| `cal`              | 今月のカレンダーを表示する。           |
| `cal [[日] 月] 年` | 指定した年月日のカレンダーを表示する。 |

### オプション

| オプション | 概要                                  |
| ---------- | ------------------------------------- |
| `-3`       | 先月・今月・来月の3ヶ月分を表示する。 |
| `-y`       | 1年分を表示する。                     |

## date

### コマンド

| コマンド   | 概要                  |
|--------|---------------------|
| `date` | システムクロックの現在日時を表示する。 |

### オプション

| オプション                    | 概要                                                                   |
|--------------------------|----------------------------------------------------------------------|
| `-u, --utc, --universal` | UTCで出力する。                                                            |
| `-d, --date 日時文字列`（GNU）  | 現在日時ではなく、指定した日時を出力する。<br />日時文字列としては、`1 day ago`や`yesterday`などが指定可能。 |
| `-v 計算式`（BSD）            | 日時に対して、指定した計算式を適用する。<br />計算式としては、`[+｜-]値[ymwdHMS]`が指定可能。            |
| `+フォーマット`                | 出力フォーマットを指定する。                                                       |

### フォーマット

| フォーマット         | 出力例                |
| -------------------- | --------------------- |
| `+%Y%m%d`            | `20220101`            |
| `+%Y/%m/%d %H:%M:%S` | `2022/01/01 00:00:00` |

## date 日時

### コマンド

| コマンド    | 概要                                                       |
| ----------- | ---------------------------------------------------------- |
| `date 日時` | システムクロックの現在日時を変更する。（rootユーザーのみ） |

### 日時形式

```text
[[[mm]dd]HH]MM[[cc]yy][.ss]
```

## hwclock

### コマンド

|コマンド|概要|
|---|---|
|`hwclock`|ハードウェアクロックを管理する。|

### オプション

| オプション      | 概要                                                       |
| --------------- | ---------------------------------------------------------- |
| `-r, --show`    | ハードウェアクロックを表示する。                           |
| `-w, --systohc` | システムクロックの時刻を、ハードウェアクロックに反映する。 |
| `-s, --hctosys` | ハードウェアクロックの時刻を、システムクロックに反映する。 |

## tzselect, tzconfig

### コマンド

| コマンド   | 概要                                                         |
| ---------- | ------------------------------------------------------------ |
| `tzselect` | タイムゾーンに設定すべき値を調べることができる。             |
| `tzconfig` | `/etc/localtime`, `/etc/timezone`ファイルの値をまとめて変更する。 |

### ファイル

| ファイル         | 概要                                                         |
| ---------------- | ------------------------------------------------------------ |
| `/etc/localtime` | タイムゾーン情報を記述する。<br />`/usr/share/zoneinfo/`以下のファイルのコピーにするか、シンボリックリンクとする。 |
| `/etc/timezone`  | Debian系のLinuxディストリビューションで、タイムゾーン情報を記述する。 |

## TZ

### 環境変数

| 環境変数 | 概要           |
| -------- | -------------- |
| `TZ`     | タイムゾーン。 |

### 値

| 値           | 概要  |
| ------------ | ----- |
| `UTC`        | UTC。 |
| `Asia/Tokyo` | JST。 |

## timedatectl

### コマンド

|コマンド|概要|
|---|---|
|`timedatectl サブコマンド`|systemdを採用したディストリビューションで、日付・時刻・タイムゾーンを管理する。|

### サブコマンド

| サブコマンド        | 概要                   |
| ------------------- | ---------------------- |
| `status`            | 現在の状態を表示する。 |
| `set-time 日付時刻` | 日付時刻を設定する。   |

## ntpdate, ntpq

### コマンド

|コマンド|概要|
|---|---|
|`ntpdate NTPサーバ名`|NTPサーバから現在時刻を取得する。|
|`ntpq`|NTPサーバの状態を照会する。|

### ファイル

| ファイル        | 概要                    |
| --------------- | ----------------------- |
| `/etc/ntp.conf` | NTPサーバの設定を行う。 |

## chronyc

### 概要

- 「Chrony」は、nttpd/ntpdateの代替となるNTPサーバ／クライアントソフトウェアである。

### コマンド

|コマンド|概要|
|---|---|
|`chronyc サブコマンド`|chronydの管理を行う。|

### サブコマンド

| サブコマンド  | 概要                                            |
| ------------- | ----------------------------------------------- |
| `activity`    | オンライン・オフラインのNTPサーバ数を表示する。 |
| `sources`     | 時刻のソースを表示する。                        |
| `sourcestats` | 時刻のソースの統計情報を表示する。              |

### ファイル

| ファイル           | 概要                 |
| ------------------ | -------------------- |
| `/etc/chrony.conf` | Chronyの設定を行う。 |
