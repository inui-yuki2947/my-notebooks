# Linux/共通/カーネルモジュール

## 共通

### 概要

- カーネルモジュールとは、カーネルを構成する機能をモジュール化したもの。

### ファイル

| ファイル                           | 概要                                                       |
| ---------------------------------- | ---------------------------------------------------------- |
| `/lib/modules/カーネルバージョン/` | カーネルモジュールが配置されるディレクトリ。               |
| `/proc/modules`                    | ロードされているカーネルモジュールに関する情報のファイル。 |

## lsmod, modinfo

### コマンド

| コマンド                         | 概要                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| `lsmod`                          | ロードされているカーネルモジュールを表示する。<br/>（`/proc/modules`ファイルを見やすく表示する） |
| `modinfo [カーネルモジュール名]` | カーネルモジュールの情報を表示する。                         |

## insmod, rmmod

### コマンド

| コマンド                          | 概要                                 |
| --------------------------------- | ------------------------------------ |
| `insmod カーネルモジュールのパス` | カーネルモジュールをロードする。     |
| `rmmod カーネルモジュール名`      | カーネルモジュールをアンロードする。 |

## modprobe, depmod

### コマンド

| コマンド                        | 概要                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| `modprobe カーネルモジュール名` | 依存関係を解決して（`modules.dep`ファイルを参照して）、<br />カーネルモジュールのロード・アンロードを行う。 |
| `depmod`                        | カーネルモジュールの依存関係情報を更新する。<br />（`modules.dep`ファイルを生成する） |

### ファイル

| ファイル                                      | 概要                                                         |
| --------------------------------------------- | ------------------------------------------------------------ |
| `/lib/modules/カーネルバージョン/modules.dep` | カーネルモジュールの依存関係を記述する。                     |
| `/etc/modprobe.conf`                          | モジュールのロード・アンロードの際の前後処理やパラメータを記述する。 |
