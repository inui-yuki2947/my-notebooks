# Linux/制御構造/条件分岐

## test, [ 条件 ], [[ 条件 ]]

### コマンド

| 記法                   | AND,OR条件       | その他                                                       |
| ---------------------- | ---------------- | ------------------------------------------------------------ |
| `test`<br />`[ 条件 ]` | `-a, -o`を使う。 | `<, >, (, )`などの記号は、クォートする必要がある。           |
| `[[ 条件 ]]`（推奨）   | `&&, ｜｜`を使う。 | 条件部分で、単語分割は行われない。<br />条件部分で、パス名展開は行われない。（比較時の右辺にある場合を除く） |

- `test, [ 条件 ], [[ 条件 ]]`は、判定した結果を**終了ステータス**として返す。

## 条件

### コマンド（文字列評価系）

| コマンド             | 概要                                 |
| -------------------- | ------------------------------------ |
| `文字列1 = 文字列2`  | 文字列が等しいかどうか               |
| `文字列1 != 文字列2` | 文字列が等しくないかどうか           |
| `文字列 =~ 正規表現` | 文字列が正規表現にマッチするかどうか |
| `-n 文字列`          | 文字列が空文字でないかどうか         |
| `-z 文字列`          | 文字列が空文字であるかどうか         |

### コマンド（整数評価系）

| コマンド          | 概要                           |
| ----------------- | ------------------------------ |
| `整数1 -eq 整数2` | 整数が等しいかどうか           |
| `整数1 -ne 整数2` | 整数が等しくないかどうか       |
| `整数1 -lt 整数2` | 整数1が整数2より小さいかどうか |
| `整数1 -le 整数2` | 整数1が整数2以下であるかどうか |
| `整数1 -gt 整数2` | 整数1が整数2より大きいかどうか |
| `整数1 -ge 整数2` | 整数1が整数2以上であるかどうか |

### コマンド（ファイル・ディレクトリ評価系）

| コマンド                      | 概要                                             |
| ----------------------------- | ------------------------------------------------ |
| `-e パス`                     | パスが存在するかどうか                           |
| `-f パス`                     | ファイルとして存在するかどうか                   |
| `-d パス`                     | ディレクトリとして存在するかどうか               |
| `-L パス`                     | シンボリックリンクとして存在するかどうか。       |
| `-r, -w, -x パス`             | 読み取り・書き込み・実行権限があるかどうか       |
| `-nt ファイル名1 ファイル名2` | ファイル1の更新日時がファイル2より新しいかどうか |
| `-ot ファイル名1 ファイル名2` | ファイル1の更新日時がファイル2より古いかどうか   |

### コマンド（その他）

| コマンド | 概要                   |
| -------- | ---------------------- |
| `-t 0`   | 標準入力が端末であるか |

## true, false, ヌルコマンド

### コマンド

| コマンド                         | 概要                                |
| -------------------------------- | ----------------------------------- |
| `true`<br /> `:`（ヌルコマンド） | 何もせず**終了ステータス0**を返す。 |
| `false`                          | 何もせず**終了ステータス1**を返す。 |

## ! コマンド

### コマンド

| コマンド     | 概要                                                         |
| ------------ | ------------------------------------------------------------ |
| `! コマンド` | コマンドを実行し、終了ステータスを反転して返す。<br />（`0`の場合は`1`、`0`以外の場合は`0`） |

## if

### コマンド

| コマンド | 概要                                                         |
| -------- | ------------------------------------------------------------ |
| 書式1    | 条件部分の**終了ステータス**が`0`の場合に、処理を実行する。<br />条件は空にできないので、不要な場合はヌルコマンドを置く。 |

- 書式1

  ```bash
  if 条件; then 
    処理
  elif 条件; then
    処理
  ...
  else
    処理
  fi
  ```

## case

### コマンド

| コマンド | 概要                                       |
| -------- | ------------------------------------------ |
| 書式1    | 文字列のパターンに応じて、処理を実行する。 |

- 書式1

  ```bash
  case 文字列 in
    パターン) 処理;;
    パターン) 処理;;
    ...
  esac
  ```

### パターン

- パターンとして、ワイルドカード`*`, `?`, `[]`も指定できる。
- `パターン1 | パターン2`で、OR条件を指定できる。
- パターンの最後には、`*`パターンを指定するとよい。
