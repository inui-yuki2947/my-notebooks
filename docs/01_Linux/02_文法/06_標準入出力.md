# Linux/文法/標準入出力

## 共通

### ファイルディスクリプタ

| ファイルディスクリプタ | 概要           |
| ---------------------- | -------------- |
| `0`                    | 標準入力       |
| `1`                    | 標準出力       |
| `2`                    | 標準エラー出力 |

## リダイレクト

### コマンド

| コマンド                  | 概要                                                         |
| ------------------------- | ------------------------------------------------------------ |
| `コマンド < ファイル名`   | 指定したファイルの内容を、標準入力にする。                   |
| `コマンド n> ファイル名`  | n番のファイルディスクリプタを、指定したファイルに**上書き**する。 |
| `コマンド n>> ファイル名` | n番のファイルディスクリプタを、指定したファイルに**追記**する。 |
| `コマンド n>&m`           | n番のファイルディスクリプタを、m番のファイルディスクリプタにする。 |

- `n>`を`>`とすると、1番（標準出力）となる。
- `n>`を`&>`とすると、1番・2番（標準出力・標準エラー出力）となる。
- リダイレクトは複数指定可能で、それは記述した順に行われる。（順不同ではない）
- 上書き時は、ファイルの内容を空にしてから処理が行われるため、**同じファイルを読み込みつつ上書きはできない。**

### 例

| 記法                                                   | 概要                                                         |
| ------------------------------------------------------ | ------------------------------------------------------------ |
| `コマンド 2>&1`                                        | 標準エラー出力を、標準出力に出力する。                       |
| `コマンド 2>&1 > ファイル`                             | 標準エラー出力を標準出力に出力し、標準出力をファイルに出力する |
| `コマンド > ファイル 2>&1`<br />`コマンド &> ファイル` | 標準出力・エラー出力を、まとめてファイルに出力する           |

## パイプライン

### コマンド

| コマンド                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `コマンド1 ｜ コマンド2`                                      | コマンド1の標準出力を、コマンド2の標準入力にする。           |
| `コマンド1 2>&1 ｜ コマンド2`<br />`コマンド1 ｜& コマンド2` *1 | コマンド1の標準出力・エラー出力を、コマンド2の標準入力にする。 |

- *1 BSDでは使えない？
- パイプラインでつないだコマンドは、サブシェルで実行される。

## ヒアドキュメント・ヒアストリング

### コマンド

| コマンド              | 概要                                                         |
| --------------------- | ------------------------------------------------------------ |
| 記法1                 | 指定した文字列を、コマンドの標準入力にする。（ヒアドキュメント） |
| `コマンド <<< 文字列` | 指定した文字列を、コマンドの標準入力にする。（ヒアストリング） |

- 記法1

  ```bash
  コマンド << 終了文字列
  文字列
  ...
  終了文字列
  ```

- ヒアドキュメントの内側では各種展開が行われるが、
  展開をさせたくない場合は、`<< 'EOF'`や`<< \EOF`などとクォートする。

### 例

```bash
cat << EOF
あいうえお
かきくけこ
EOF
```

## グループコマンド

### コマンド

| 記法                                | 概要                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| `{ コマンド1 ; コマンド2 ; ... ; }` | **カレントシェル**で、複数のコマンドを実行し、まとめて標準出力する。 |
| `( コマンド1 ; コマンド2 ; ... )`   | **サブシェル**で、複数のコマンドを実行し、まとめて標準出力する。 |

### その他

- サブシェルでは、シェル変数・環境変数は引き継がれるが、サブシェル内での変更は反映されない。

## その他

### ハイフン

- `cat, diff, vim, wget`コマンドで、`-`を引数に渡すと、標準入出力として扱われる。
  [git, cd, su, cat, diff, vim...-(ハイフン)でできること@コマンドライン - Qiita](https://qiita.com/ryosukes/items/b9a3b2913f72e1127e58#cat-diff-vim-wget%E3%81%A7%E3%83%8F%E3%82%A4%E3%83%95%E3%83%B3%E3%82%92%E5%BC%95%E6%95%B0%E3%81%AB%E6%B8%A1%E3%81%99%E3%81%A8)
