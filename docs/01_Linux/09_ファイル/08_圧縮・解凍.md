# Linux/ファイル/圧縮・解凍

## 共通

### 圧縮形式

| 圧縮形式 | コマンド           | 拡張子 | 圧縮率 | 速度 | 備考              |
| -------- | ------------------ | ------ | ------ | ---- | ----------------- |
| gzip     | `gzip`, `gunzip`   | `.gz`  | 低     | 速い | Linuxでよく使う。 |
| bzip2    | `bzip2`, `bunzip2` | `.bz2` | 中     | 普通 |                   |
| xz       | `xz`, `unxz`       | `.xz`  | 高     | 遅い |                   |

## gzip, gunzip

### コマンド

| コマンド                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `gzip ファイル名...`                                         | 指定したファイルの内容を圧縮して、`ファイル名.gz`として保存する。 |
| `gunzip ファイル名...`<br />`gzip <-d, --decompress> ファイル名...` | 指定したファイルの内容を解凍して、`ファイル名（.gzを除く）`として保存する。<br />元のファイルは削除する。 |

- `gzip`, `gunzip`の部分は、`bzip2`, `bunzip2`, `xz`, `unxz`でも同様。

### オプション

| オプション   | 概要1                                                      |
| ------------ | ---------------------------------------------------------- |
| `-k, --keep` | 元のファイルを削除しない。（デフォルトでは削除される）     |
| `-r`         | ディレクトリ内のファイルをそれぞれ圧縮する。               |
| `-c`         | 元ファイルは残したまま、標準出力に圧縮ファイルを出力する。 |

## zip

### コマンド

|コマンド|概要|
|---|---|
|`zip ZIPファイル名 [対象ファイル名]`|ファイルをZIP形式で圧縮する。|

## unzip

### コマンド

| コマンド                             | 概要                          |
| ------------------------------------ | ----------------------------- |
| `unzip ZIPファイル名 対象ファイル名` | ファイルをZIP形式で解凍する。 |

### オプション

| オプション | 概要                 |
| ---------- | -------------------- |
| `-p`       | 標準出力に出力する。 |

## アーカイブファイル

### 概要

- アーカイブファイルとは、複数のファイルを1つにまとめたファイルである。
- アーカイブファイル名は、gzip形式の場合、`.tar.gz`または`.tgz`である。
- `file`コマンドで、アーカイブファイルの圧縮形式を確認できる。

## tar

### コマンド

| コマンド                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `tar <-c, --create> -f アーカイブファイル名 パス1 パス2 ...` | 指定したパスに含まれる全てのファイルを、アーカイブファイルにする。 |
| `tar <-x, --extract> [ファイル名]`                           | 標準入力（の指定したファイル）を展開する。                   |
| `tar <-x, --extract> -f アーカイブファイル名 [ファイル名]`   | 指定したアーカイブファイル（の指定したファイル）を展開する。 |
| `tar <-t, --list> [ファイル名]`                              | 標準入力に含まれるファイル（の指定したもの）の一覧を表示する。 |
| `tar <-t, --list> -f アーカイブファイル名 [ファイル名]`      | 指定したアーカイブファイルに含まれるファイル（の指定したもの）の一覧を表示する。 |

### オプション（圧縮・解凍系）

| オプション    | 概要                        |
| ------------- | --------------------------- |
| `-z, --gzip`  | gzip形式で圧縮・解凍する。  |
| `-j, --bzip2` | bzip2形式で圧縮・解凍する。 |

- デフォルトでは、圧縮・解凍は行われない。

### オプション（その他）

| オプション                        | 概要                                       |
| --------------------------------- | ------------------------------------------ |
| `-v, --verbose`                   | 詳細情報を表示する。                       |
| `-f, --file アーカイブファイル名` | アーカイブファイルを指定する。（ほぼ必須） |

## cpio

### コマンド

|コマンド|概要|
|---|---|
|`cpio フラグ [オプション]`|アーカイブファイルとの間で、ファイルをコピーする。|

### フラグ

| フラグ | 概要                                                         |
| ------ | ------------------------------------------------------------ |
| `-i`   | ファイルをアーカイブファイルからコピーする。（コピーインモード） |
| `-o`   | ファイルをアーカイブファイルにコピーする。（コピーアウトモード） |
| `-p`   | ファイルを別ディレクトリにコピーする。（コピーパスモード）   |

## dd

### コマンド

| コマンド | 概要                                                         |
| -------- | ------------------------------------------------------------ |
| `dd`     | ファイルをブロック単位で読み出し、指定通り変換して出力する。<br/>（ハードディスクやCD-ROMなどのデバイスの内容を、そのまま取り扱える） |

### オプション

| オプション          | 概要                     |
| ------------------- | ------------------------ |
| `if=入力ファイル名` | 入力ファイルを指定する。 |
| `of=出力ファイル名` | 出力ファイルを指定する。 |

## 解凍をラップしたコマンド

### 概要

- 下記コマンドは、gzip形式で圧縮したファイルに対して、`z`を除いたコマンドを実行できる。
  - zcat
  - zless
  - zmore
  - zgrep
  - zcmp
  - zdiff
- bzip2形式やxz形式のファイルについては、`bzcat`や`xzcat`コマンドが利用できる。
