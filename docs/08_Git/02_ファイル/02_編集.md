# Git/ファイル/編集

## git add, reset, checkout ファイル

### コマンド

| コマンド                | 概要                                                         |
| ----------------------- | ------------------------------------------------------------ |
| `git add ファイル`      | 指定したファイルについて、インデックスを、ワークツリーの状態に変更する。（ステージ） |
| `git reset ファイル`    | 指定したファイルについて、インデックスを、リポジトリの状態に変更する。（アンステージ） |
| `git checkout ファイル` | 指定したファイルについて、ワークツリーを、インデックスの状態に変更する。 |

### オプション（`add`）

| オプション            | 概要                                 |
| --------------------- | ------------------------------------ |
| `-N, --intent-to-add` | ファイルを管理対象に含めるのみ行う。 |

## git checkout, reset コミット ファイル

### コマンド

| コマンド                         | 概要                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| `git checkout コミット ファイル` | 指定したファイルについて、インデックス・ワークツリーを、指定したコミットの状態に変更する。 |
| `git reset コミット ファイル`    | 指定したファイルについて、インデックスを、指定したコミットの状態に変更する。 |

- [Git の Reset, Checkout, Revert の違い - yu8mada](https://yu8mada.com/2018/06/01/the-difference-between-reset-checkout-and-revert-in-git/)

## git checkout コミット

### コマンド

| コマンド                                      | 概要                                                         |
| --------------------------------------------- | ------------------------------------------------------------ |
| `git checkout [コミット]`                     | ブランチ・HEAD・インデックス・ワークツリーを、指定したコミットの状態に変更する。 |
| `git checkout -b ブランチ名 [派生元コミット]` | 派生元コミットからブランチを作成した後、<br />ブランチ・HEAD・インデックス・ワークツリーを、その状態に変更する。 |

### その他

- コミットとしてローカルブランチ以外を指定した場合は、「detached HEAD」状態（HEADがブランチを指していない状態）となる。
- 派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。
- インデックス・ワークツリーは、今ある未コミットの変更と、指定したコミットの状態をマージした状態となる。
  （コンフリクトする場合は、チェックアウトが失敗する）

## git reset コミット

### コマンド

| コマンド               | 概要                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `git reset [コミット]` | HEAD（・インデックス・ワークツリー）を、指定したコミットの状態に変更する。 |

### オプション

| オプション              | インデックス | ワークツリー |
| ----------------------- | ------------ | ------------ |
| `--soft`                | 変更しない   | 変更しない   |
| `--mixed`（デフォルト） | 変更する     | 変更しない   |
| `--hard`                | 変更する     | 変更する     |

## git rm

### コマンド

| コマンド          | 概要                                                         |
| ----------------- | ------------------------------------------------------------ |
| `git rm ファイル` | 指定したファイルを、ワークツリー・インデックスから削除する。 |

### オプション

| オプション | 概要                                         |
| ---------- | -------------------------------------------- |
| `--cached` | インデックスからのみ、ファイルを削除できる。 |

## git clean

### コマンド

| コマンド           | 概要                             |
| ------------------ | -------------------------------- |
| `git clean [パス]` | 管理対象外のファイルを削除する。 |

### オプション

| オプション      | 概要                           |
| --------------- | ------------------------------ |
| `-f, --force`   | 削除を確定する。               |
| `-n, --dry-run` | ドライランする。               |
| `-d`            | ディレクトリも含めて削除する。 |
