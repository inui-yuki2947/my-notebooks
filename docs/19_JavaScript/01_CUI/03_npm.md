# JavaScript/CUI/npm

## 共通

### 概要

- npm (Node Package Manager)は、公式のJavaScriptパッケージマネージャー。

### ファイル

| ファイル            | 概要                                                     |
| ------------------- | -------------------------------------------------------- |
| `package.json`      | インストールするモジュールを記載するファイル。           |
| `package-lock.json` | インストールされたモジュールが自動で記載されるファイル。 |
| `node_modules/`     | モジュールの中身が配置されるディレクトリ。               |

### 参考資料

- [npm入門 - とほほのWWW入門](https://www.tohoho-web.com/ex/npm.html)

## インストール

### WSL

- [WSL 2 上で Node.jis を設定する | Microsoft Docs](https://docs.microsoft.com/ja-jp/windows/dev-environment/javascript/nodejs-on-wsl)

## npm

### コマンド

| コマンド           | 概要                  |
| ------------------ | --------------------- |
| `npm サブコマンド` | npmの各種操作を行う。 |

### オプション

| オプション     | 概要                                                         |
| -------------- | ------------------------------------------------------------ |
| `-g, --global` | グローバルに操作を行う。（デフォルトはローカルに操作を行う） |

## npm -v

### コマンド

| コマンド            | 概要                        |
| ------------------- | --------------------------- |
| `npm -v, --version` | npmのバージョンを表示する。 |

## npm help

### コマンド

| コマンド                | 概要                                     |
| ----------------------- | ---------------------------------------- |
| `npm help`              | npmのヘルプを表示する。                  |
| `npm help サブコマンド` | 指定したサブコマンドのヘルプを表示する。 |

## npm init

### コマンド

| コマンド   | 概要                                                         |
| ---------- | ------------------------------------------------------------ |
| `npm init` | 対話的に設定を行った後、<br />カレントディレクトリに、`package.json`ファイルを作成する。 |

### オプション

| オプション  | 概要                     |
| ----------- | ------------------------ |
| `-y, --yes` | 対話的な質問を省略する。 |

## npm ls

### コマンド

| コマンド                 | 概要                                           |
| ------------------------ | ---------------------------------------------- |
| `npm ls`<br />`npm list` | インストール済みのパッケージの一覧を表示する。 |

## npm install

### コマンド

| コマンド                                         | 概要                                                         |
| ------------------------------------------------ | ------------------------------------------------------------ |
| `npm i, install`                                 | `package.json`ファイルの内容に従って、パッケージをインストールする。 |
| `npm i, install パッケージ名1 パッケージ名2 ...` | 指定したパッケージを全てインストールする。                   |

- `パッケージ名@x.y.z`とすると、指定したバージョンのパッケージをインストールする。
- `npm i`では、カレントディレクトリから上の階層に遡って`package.json`ファイルを探索し、最初に見つかったディレクトリでインストールを行う。
  （ファイルが存在しない場合は、何も起こらない）

### オプション

| オプション             | 概要                                                         |
| --------------------- | ------------------------------------------------------------ |
| `-P, --save-prod`     | `package.json` ファイルの `dependencies` に追加する。（デフォルト） |
| `-D, --save-dev`      | `package.json` ファイルの `devDependencies` に追加する。     |
| `-O, --save-optional` | `package.json` ファイルの `optionalDependencies` に追加する。 |

## npm uninstall

### コマンド

| コマンド                                                     | 概要                                       |
| ------------------------------------------------------------ | ------------------------------------------ |
| `npm un パッケージ名...`<br />`npm uninstall パッケージ名...`<br />`npm remove パッケージ名...` | 指定したパッケージをアンインストールする。 |

## npx

### コマンド

| コマンド                  | 概要                           |
| ------------------------- | ------------------------------ |
| `npm パッケージ名 [引数]` | 指定したパッケージを実行する。 |

### npxの役割

- ローカルにインストールしたnpm packageのコマンドを、透過的に実行する。
- ローカルに存在しないコマンドでも、一時的にダウンロードして実行する。
- [npxようやく理解した - Lambdaカクテル](https://blog.3qe.us/entry/2019/10/17/150753)

## npm run

### コマンド

| コマンド           | 概要                                      |
| ------------------ | ----------------------------------------- |
| `npm run`          | タスク（npm-scripts）の一覧を表示する。   |
| `npm run タスク名` | 指定したタスク（npm-scripts）を実行する。 |
