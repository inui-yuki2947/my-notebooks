# Git/GitHub Actions/ワークフロー

## 共通

### 参考資料

- [Workflow syntax for GitHub Actions - GitHub Docs](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)

## name

### プロパティ

| プロパティ | 型       | 概要                                                         | デフォルト値                                             |
| ---------- | -------- | ------------------------------------------------------------ | -------------------------------------------------------- |
| `name`     | 文字列型 | GitHubリポジトリの「Actions」タブに表示される、<br />ワークフローの名前。 | リポジトリルートに対する、<br />当該ファイルの相対パス。 |

## on

### プロパティ（共通）

| プロパティ          | 型                                               | 概要                                                         |
| ------------------- | ------------------------------------------------ | ------------------------------------------------------------ |
| `on`                | 文字列型<br />文字列の配列型<br />オブジェクト型 | GitHub Actionsのトリガーとなるイベントの集合。               |
| `on.イベント`       | オブジェクト型                                   | GitHub Actionsのトリガーとなるイベント。                     |
| `on.イベント.types` | 文字列の配列型                                   | イベントのアクティビティタイプ。<br />（イベントによって使用可能な値は異なる） |

### プロパティ（イベントのフィルター）

| プロパティ                    | 型             | 概要                               |
| ----------------------------- | -------------- | ---------------------------------- |
| `on.イベント.branches`        | 文字列の配列型 | イベントを適用するブランチ名。     |
| `on.イベント.branches-ignore` | 文字列の配列型 | イベントを適用除外するブランチ名。 |
| `on.イベント.tags`            | 文字列の配列型 | イベントを適用するタグ名。         |
| `on.イベント.tags-ignore`     | 文字列の配列型 | イベントを適用除外するタグ名。     |
| `on.イベント.paths`           | 文字列の配列型 | イベントを適用するパス名。         |
| `on.イベント.paths-ignore`    | 文字列の配列型 | イベントを適用除外するパス名。     |

- 当プロパティは、`push`, `pull_request`, `pull_request_target`イベントでのみ使用可能。

### イベント

| イベント              | 概要                                                         |
| --------------------- | ------------------------------------------------------------ |
| `push`                | コミットまたはタグがプッシュされたタイミング。               |
| `pull_request`        | プルリクエストが、開かれた・再度開かれた・そのHEADが更新されたタイミング。 |
| `pull_request_review` | プルリクエストのレビューが、送信・編集・削除されたタイミング。 |
| `schedule`            | cronで指定されたタイミング。（**UTC**で指定）                |
| `workflow_dispatch`   | 手動で実行されたタイミング。                                 |

- [Events that trigger workflows - GitHub Docs](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows)

## jobs

### 概要

- ジョブとは、ワークフロー内で並列実行される処理である。
- ステップとは、ジョブ内で直列実行される処理である。

### プロパティ（共通）

| プロパティ                      | 型                           | 概要                                                      | デフォルト値 |
| ------------------------------- | ---------------------------- | --------------------------------------------------------- | ------------ |
| `jobs`                          | オブジェクト型               | ジョブの集合。                                            |              |
| `jobs.ジョブID`                 | オブジェクト型               | ジョブ。                                                  |              |
| `jobs.ジョブID.name`            | 文字列型                     | ジョブの名前。                                            |              |
| `jobs.ジョブID.runs-on`         | 文字列型<br />文字列の配列型 | ジョブを実行する環境。<br />（`ubuntu-latest`が一般的？） |              |
| `jobs.ジョブID.timeout-minutes` | 数値型                       | ジョブのタイムアウト時間（分）。                          | `360`        |
| `jobs.ジョブID.steps`           | オブジェクトの配列型         | ステップの集合。                                          |              |

### プロパティ（条件系）

| プロパティ            | 型                           | 概要                                             |
| --------------------- | ---------------------------- | ------------------------------------------------ |
| `jobs.ジョブID.needs` | 文字列型<br />文字列の配列型 | ジョブの実行前に成功を待機する、他のジョブのID。 |
| `jobs.ジョブID.if`    | 文字列型                     | ジョブの実行前に成功を待機する、条件式。         |
