# Git/GitHub Actions/ジョブ・ステップ

## jobs

### 概要

- ジョブとは、ワークフロー内で並列実行される処理である。
- ステップとは、ジョブ内で直列実行される処理である。

### プロパティ（共通）

| プロパティ                      | 型                                  | 必須 | 概要                                                      | デフォルト値 |
| ------------------------------- | ----------------------------------- | ---- | --------------------------------------------------------- | ------------ |
| `jobs`                          | オブジェクト型                      | ○    | ジョブの集合。                                            |              |
| `jobs.ジョブID`                 | オブジェクト型                      | ○    | ジョブ。                                                  |              |
| `jobs.ジョブID.name`            | 文字列型                            |      | ジョブの名前。                                            |              |
| `jobs.ジョブID.runs-on`         | 文字列型<br />文字列の配列型        | ○    | ジョブを実行する環境。<br />（`ubuntu-latest`が一般的？） |              |
| `jobs.ジョブID.timeout-minutes` | 数値型                              |      | ジョブのタイムアウト時間（分）。                          | `360`        |
| `jobs.ジョブID.env`             | オブジェクト型<br />（Key/Value型） |      | 環境変数として設定する値。（ジョブ内スコープ）            |              |

### プロパティ（条件系）

| プロパティ            | 型                           | 概要                                             |
| --------------------- | ---------------------------- | ------------------------------------------------ |
| `jobs.ジョブID.needs` | 文字列型<br />文字列の配列型 | ジョブの実行前に成功を待機する、他のジョブのID。 |
| `jobs.ジョブID.if`    | 文字列型                     | ジョブの実行前に成功を待機する、条件式。         |

## steps

### プロパティ（基本）

| プロパティ                              | 型                                  | 概要                                                         |
| --------------------------------------- | ----------------------------------- | ------------------------------------------------------------ |
| `jobs.ジョブID.steps`                   | オブジェクトの配列型                | ステップの集合。                                             |
| `jobs.ジョブID.steps[].id`              | 文字列型                            | ステップの識別子。                                           |
| `jobs.ジョブID.steps[].name`            | 文字列型                            | ステップの表示名。                                           |
| `jobs.ジョブID.steps[].timeout-minutes` | 数値型                              | ステップのタイムアウト時間（分）。                           |
| `jobs.ジョブID.steps[].uses`            | 文字列型                            | 使用するアクションの名前。<br />`{owner}/{repo}@{ref}`の形式で指定する。 |
| `jobs.ジョブID.steps[].with`            | オブジェクト型<br />（Key/Value型） | 環境変数として設定する値。<br />変数名の先頭には`INPUT_`が付与され、大文字に変換される。 |
| `jobs.ジョブID.steps[].env`             | オブジェクト型<br />（Key/Value型） | 環境変数として設定する値。（ステップ内スコープ）             |

### プロパティ（条件系）

| プロパティ                                | 型       | 概要                                                   | デフォルト値 |
| ----------------------------------------- | -------- | ------------------------------------------------------ | ------------ |
| `jobs.ジョブID.steps[].if`                | 文字列型 | ステップの実行前に成功を待機する、条件式。             |              |
| `jobs.ジョブID.steps[].continue-on-error` | 真偽値型 | ステップが失敗した場合でも、ジョブを成功扱いにするか。 | `FALSE`      |

### プロパティ（シェル系）

| プロパティ                    | 型       | 概要                       |
| ----------------------------- | -------- | -------------------------- |
| `jobs.ジョブID.steps[].run`   | 文字列型 | シェルで実行するコマンド。 |
| `jobs.ジョブID.steps[].shell` | 文字列型 | 使用するシェルの名前。     |

### その他

- カレントディレクトリは、`/home/runner/work/リポジトリ名/リポジトリ名`となる？
- デフォルトでは、リポジトリ（内のファイル）は扱えない。
