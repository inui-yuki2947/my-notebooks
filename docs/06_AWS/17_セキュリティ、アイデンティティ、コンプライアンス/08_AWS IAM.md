# AWS/セキュリティ、アイデンティティ、コンプライアンス/AWS IAM

## 共通

### 概要

- **AWS IAM（Identity and Access Management）**は、AWSにおける認証機能。
- **プリンシパル**とは、ユーザー、ロールなどAWSにアクセスする主体である。
- [IAM とは - AWS Identity and Access Management](https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/introduction.html)

### IAMユーザー

- **IAMユーザー**は、AWSで作成したエンティティのこと。
- IAMユーザーの認証には、ID・パスワードの組み合わせと、
  **アクセスキーID**と**シークレットアクセスキー**の組み合わせ（AWS CLIやAWS SDKで使用）がある。

### IAMグループ

- **IAMグループ**は、IAMユーザーの集合。
- IAMユーザーあたり10までのグループに所属できる。

### IAMロール

- **IAMロール**は、「AWSのリソースに付与するもの」で、IAMポリシーをグルーピングしたもの。
- **スイッチロール**とは、特定のIAMユーザーから別のIAMロールに切り替えること。

### IAMポリシー

- **IAMポリシー**は、実行者がどのサービスにアクセスできるかを設定する機能。
- IAMポリシーには、アイデンティティベースのポリシー、リソースベースのポリシーなどがある。
- 権限の優先度は、**明示的な拒否、明示的な許可、暗示的な拒否**の順。
- 種類

    | 種類                   | 概要                                                         |
    | ---------------------- | ------------------------------------------------------------ |
    | AWS管理ポリシー        | AWSが感知する、事前に定義されたポリシーのテンプレート。      |
    | カスタマー管理ポリシー | AWSのユーザーが自身で作成・カスタマイズできるポリシー。      |
    | インラインポリシー     | 1 つの IAMアイデンティティ（ユーザー・グループ・ロール）に埋め込まれたポリシー。 |

### AWS STS

- **AWS Security Token Service（AWS STS）**を使用して、AWSへの一時的なアクセスキーを発行することができる。
- **AssumeRole**とは、IAMロールを引き受けることである。

### IAM Access Analyzer

- **IAM Access Analyzer**は、外部エンティティと共有されている組織内のリソースやアカウント（Amazon S3バケットやIAMロールなど）を識別するのに役立つ。

### その他

- **Permissions Boundary**を設定すると、IAMエンティティの権限は、Permissions PolicyとPermissions BoundaryのAND部分となる。
- **信頼されたエンティティ**とは、ロールをアタッチできるサービス。
