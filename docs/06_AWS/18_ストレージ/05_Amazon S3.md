# AWS/ストレージ/Amazon S3

## 共通

### 概要

- **Amazon Simple Storage Service（Amazon S3）**は、**オブジェクトストレージ**（データをオブジェクトとしてあつかう方式）サービスである。
- S3に保存したオブジェクトは、**同一リージョン内の3箇所のAZ**に自動的に複製される。
- **クロスリージョンレプリケーション**を有効化すると、別リージョンのS3バケットにオブジェクトを複製できる。
- **マルチパートアップロード**を用いると、大容量のオブジェクトを分割してアップロードできる。
- **Amazon S3 Transfer Acceleration**は、エッジロケーションを用いてクライアントとS3間の通信化を高速化する。
- デフォルトでは全てのS3オブジェクトはプライベートだが、**署名付きURL**を用いると、一定時間だけオブジェクトを他のユーザーと共有できる。
- **リクエスタ支払い**を設定すると、ユーザ側にオブジェクトへのアクセス料金を支払わせることが出来る。
- [Amazon S3 とは - Amazon Simple Storage Service](https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html)

### バケット・オブジェクト

- **バケット**は、Windowsで言うところのドライブで、**オブジェクト**はファイルのこと。
- バケットの中にバケットは作成できない。
- バケット作成後は、名前やリージョンを変更できない。

### セキュリティ

- **バケットポリシー**は、バケット全体のアクセス制御を行う機能である。
- **ブロックパブリックアクセス**によるアクセス制御を行うと、バケットポリシーやACLの設定に対して、一括で制限を設けることができる。

### 暗号化

| 種類    | 暗号化処理         | 鍵の管理                 |
| ------- | ------------------ | ------------------------ |
| CSE     | クライアントサイド | クライアントが提供・管理 |
| SSE-C   | サーバーサイド     | クライアントが提供・管理 |
| SSEｰS3  | サーバーサイド     | Amazon S3が提供・管理    |
| SSE-KMS | サーバーサイド     | AWS KMSが提供・管理      |

### ストレージクラス

| 種類                    | 概要                                                         |
| ----------------------- | ------------------------------------------------------------ |
| 標準                    | 標準のストレージクラス。                                     |
| 標準ー低頻度アクセス    | 標準クラスに比べて安価だが、データの読み出し容量に対して課金されるストレージクラス。 |
| Glacier                 | データアーカイブ・長期バックアップを意識して作られた、最も安価なストレージクラス。<br />さらに安価な**Glacier Deep Archive**もある。 |
| 1ゾーンー低頻度アクセス | 1つのAZのみにデータを保存する代わりに安価なストレージクラス。 |
| Intelligent Tiering     | アクセス頻度に応じて、コスト最適なストレージ層を自動で使い分けるストレージクラス。 |

## aws s3

### コマンド

| コマンド                      | 概要                                                         |
| ----------------------------- | ------------------------------------------------------------ |
| `aws s3 ls パス`              | S3に存在するファイルの一覧を表示する。                       |
| `aws s3 cp コピー元 コピー先` | S3に存在するファイルをコピーする。<br />引数に`-`を指定することで、標準入力または標準出力を指定できる。 |
