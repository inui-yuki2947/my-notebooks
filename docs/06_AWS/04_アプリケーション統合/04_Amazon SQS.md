# AWS/アプリケーション統合/Amazon SQS

## 共通

### 概要

- **Amazon Simple Queue Service（Amazon SQS）**は、完全マネージド型メッセージキューである。（cf. Amazon MQ）
- メッセージを送信する側を**プロデューサー**、受信する側を**コンシューマー**と呼び、**一対一**の関係である。（cf. Amazon SNS）
- [Amazon Simple Queue Serviceとは? - Amazon Simple Queue Service](https://docs.aws.amazon.com/ja_jp/AWSSimpleQueueService/latest/SQSDeveloperGuide/welcome.html)

### キューの種類

| 種類         | 概要                                                         |
| ------------ | ------------------------------------------------------------ |
| 標準のキュー | 高いスループットが可能であるが、処理を行う順番が保証されない。 |
| FIFOキュー   | スループットは低くなるが、キューイングした順番で処理することが保証される。 |

### メッセージの取得方法

| 種類               | 概要                                                         |
| ------------------ | ------------------------------------------------------------ |
| ショートポーリング | キューが空の場合にEmptyメッセージが返送される。              |
| ロングポーリング   | キューが空の場合にメッセージを取得できるまで待機するので、<br />メッセージ取得要求数を減らせる。 |

### 可視性タイムアウト

- **可視性タイムアウト**は、ある受信者がメッセージを取得した場合に、ほかの受信者にはそのメッセージを一定時間見せないようにする機能であり、
  処理の重複を防止したり、リクエスト数を減らすことができる。

### デッドレターキュー

- **デッドレターキュー**は、処理に失敗したメッセージを別のキューに移動する機能であり、
  問題のあるメッセージを分離したりできる。

### 遅延キュー

- **遅延キュー**は、キューにメッセージが送信されてから、それがコンシューマーに表示されるまでの遅延時間を設定する機能である。

### 共有キュー

- キューポリシーを設定し、アカウント間でキューの送受信を設定することで、キューを共有することができる。
