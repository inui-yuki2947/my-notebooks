# Git/Git/その他

## git status

### コマンド

| コマンド                    | 概要                                                         |
| --------------------------- | ------------------------------------------------------------ |
| `git status`                | ワークツリーのステータスを表示する。                         |
| `git status ディレクトリ名` | 指定したディレクトリについて、ワークツリーのステータスを表示する。 |

### オプション

| オプション    | 概要                         |
| ------------- | ---------------------------- |
| `-s, --short` | 短いフォーマットで表示する。 |

## git grep

### コマンド

| コマンド                           | 概要                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| `git grep 検索パターン`            | カレントディレクトリのGit管理ファイルについて、検索パターンで検索する。 |
| `git grep 検索パターン <pathspec>` | 指定したpathspecのGit管理ファイルについて、検索パターンで検索する。 |

## git stash

### コマンド

| コマンド                          | 概要                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| `git stash list`                  | スタッシュの一覧を表示する。                                 |
| `git stash show [スタッシュ名]`   | 指定したスタッシュ（省略時は`stash@{0}`）の詳細を表示する。  |
| `git stash`<br />`git stash push` | ワークツリーの変更を、スタッシュに追加する。<br />スタッシュのインデックスは、**新しく追加した順に**`0`から割り振られる。 |
| `git stash apply [スタッシュ名]`  | 指定したスタッシュ（省略時は`stash@{0}`）を、ワークツリーに適用する。<br />（スタッシュは削除しない） |
| `git stash pop [スタッシュ名]`    | 指定したスタッシュ（省略時は`stash@{0}`）を、ワークツリーに適用する。<br />（スタッシュは削除する） |
| `git stash drop [スタッシュ名]`   | 指定したスタッシュ（省略時は`stash@{0}`）を削除する。        |
| `git stash clear`                 | 全てのスタッシュを削除する。                                 |

### オプション

| コマンド         | オプション                 | 概要                             |
| ---------------- | -------------------------- | -------------------------------- |
| `git stash push` | `-m, --message メッセージ` | メッセージを指定する。           |
| `git stash push` | `-u, --include-untracked`  | 追跡対象でないファイルも含める。 |

## git submodule

### コマンド

| コマンド                              | 概要                                                         |
| ------------------------------------- | ------------------------------------------------------------ |
| `git submodule`                       | サブモジュールの一覧を表示する。                             |
| `git submodule status`                | サブモジュールのステータスの一覧を表示する。                 |
| `git submodule add リポジトリ [パス]` | 指定したリポジトリを、指定したパス（未指定時はリポジトリ名のディレクトリ）に<br />サブモジュールとして追加する。 |
| `git submodule deinit <-all｜パス>`   | 全てまたは指定したパスのサブモジュールを削除する。<br />（ディレクトリは削除されないので、削除したい場合は`git rm`を行う） |
| `git sudmodule update [パス]`         | 指定したパスのサブモジュール（未指定時は全てのサブモジュール）を、<br />メインリポジトリで指定したコミットに更新する。 |
| `git sudmodule sync`                  | `.gitmodules`ファイルをもとに、リモートURLの設定を更新する。 |

- サブモジュール追加後、追加前のコミットに戻った場合、サブモジュールは**Git管理されていないファイル**として残る。

### オプション

| コマンド               | オプション | 概要                                                         |
| ---------------------- | ---------- | ------------------------------------------------------------ |
| `git sudmodule update` | `--init`   | サブモジュールがない場合に取得を行う。                       |
| `git sudmodule update` | `--remote` | サブモジュールを、リモートの上流ブランチのコミットに更新する。<br />（`--checkout, --merge, --rebase`オプションで、更新ロジックを指定できる） |

## git reflog

### コマンド

| コマンド     | 概要                      |
| ------------ | ------------------------- |
| `git reflog` | Gitの操作履歴を表示する。 |

## git rev-parse

### コマンド

| コマンド                 | 概要                                     |
| ------------------------ | ---------------------------------------- |
| `git rev-parse コミット` | 指定したコミットのハッシュ値を表示する。 |

### オプション

| オプション       | 概要                           |
| ---------------- | ------------------------------ |
| `--abbrev-ref`   | 正式なブランチ名を表示する。   |
| `--short [長さ]` | 短縮版のハッシュ値を表示する。 |

## git filter-branch

### コマンド

| コマンド                                          | 概要                                                         |
| ------------------------------------------------- | ------------------------------------------------------------ |
| `git filter-branch [--] [<rev-list options> ...]` | 指定したブランチ（省略時はHEAD）で、コミット履歴を書き換える。<br />`--all`指定時は全てのブランチとなる。 |

### オプション

| オプション              | 概要                                               |
| ----------------------- | -------------------------------------------------- |
| `--env-filter コマンド` | 指定したコマンドを実行し、環境変数などを設定する。 |
| `-f, --force`           | 既にバックアップがある場合に上書きする。           |

### 参考資料

- [Git - 歴史の書き換え](https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E3%83%84%E3%83%BC%E3%83%AB-%E6%AD%B4%E5%8F%B2%E3%81%AE%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88)
