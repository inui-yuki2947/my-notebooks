# Git/Git/コミット履歴

## 共通

### コミットの記法

| 書式                                     | 概要             |
| ---------------------------------------- | ---------------- |
| `コミット~`, `コミット^`                 | 親1つ目          |
| `コミット~~`, `コミット~2`, `コミット^^` | 親1つ目の親1つ目 |
| `コミット^2`                             | 親2つ目          |
| `コミット^2^`                            | 親2つ目の親1つ目 |

- `^`は、マージコミットを遡りたい場合などに使う。
  - `マージコミット^`は、ベースブランチ側（mainなど）のコミット

  - `マージコミット^2`は、HEADブランチ側のコミット

- [【やっとわかった！】gitのHEAD^とHEAD~の違い - Qiita](https://qiita.com/chihiro/items/d551c14cb9764454e0b9)

### AuthorとCommiter

| 種類      | 概要                                                         |
| --------- | ------------------------------------------------------------ |
| Author    | オリジナルのコードを書いた人。                               |
| Committer | コミットをした人。<br />`git log --pretty=fuller`などとすれば表示できる。 |

### pathspec

| pathspec           | 概要             |
| ------------------ | ---------------- |
| `:!パス`, `:^パス` | パスを除外する。 |

### refspec

- TODO あとで調べる

## git diff

### コマンド

| コマンド                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `git diff`                                                   | インデックスからワークツリーへの差分を表示する。             |
| `git diff コミット`                                          | 指定したコミットからワークツリーへの差分を表示する。         |
| `git diff --cached [コミット]`                               | 指定したコミットからインデックスへの差分を表示する。         |
| `git diff コミット1 コミット2`<br />`git diff [コミット1]..[コミット2]` | コミット1からコミット2への差分を表示する。                   |
| `git diff [コミット1]...[コミット2]`                         | 2つのコミットの先祖から、コミット2への差分を表示する。<br />（`git diff $(git merge-base コミット1 コミット2) コミット2`と同義） |

- 末尾に`[--] パス`を付けると、指定したパスのみ表示する。
- [git diff と git log におけるドット表記](https://zenn.dev/yoichi/articles/git-dotted-notations)

### オプション

| オプション      | 概要                                                         |
| --------------- | ------------------------------------------------------------ |
| `--name-only`   | ファイル名のみ出力する。                                     |
| `--diff-filter` | 出力するファイルを変更する。<br />`ACDMRTUXB`が指定可能で、小文字にすればそれ以外となる。 |
| `--exit-code`   | 差分があれば`1`、なければ`0`で終了ステータスを返す。         |
| `--quiet`       | `--exit-code`オプションを、標準出力をしない形で適用する。    |
| `--no-patch`    | 差分の出力を行わない。                                       |

## git log

### コマンド

| コマンド                        | 概要                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| `git log`                       | 全てのコミット履歴を表示する。                               |
| `git log コミット1..コミット2`  | コミット1に含まれず、コミット2に含まれるコミット履歴を表示する。 |
| `git log コミット1...コミット2` | コミット1,2の共通部分以外（排他的論理和）のコミット履歴を表示する。 |

- 末尾に`[--] パス`を付けると、指定したパスのみ表示する。
- [git diff と git log におけるドット表記](https://zenn.dev/yoichi/articles/git-dotted-notations)

### オプション

| 分類         | オプション                                     | 概要                         | 例                                  |
| ------------ | ---------------------------------------------- | ---------------------------- | ----------------------------------- |
| 表示内容     | `-個数`<br />`-n 個数`<br />`--max-count 個数` | 指定した個数のみ表示する。   |                                     |
| フォーマット | `--reverse`                                    | ログを古い順に表示する。     |                                     |
| フォーマット | `--oneline`                                    | ログを一行で表示する。       |                                     |
| フォーマット | `--pretty=format:項目フォーマット`             | 項目フォーマットを指定する。 |                                     |
| フォーマット | `--date=format:日時フォーマット`               | 日時フォーマットを指定する。 | `--date=format:"%Y/%m/%d %H:%M:%S"` |

### 項目フォーマット

| 書式   | 概要                 |
| ------ | -------------------- |
| `%h`   | コミットID（短縮形） |
| `%x09` | タブ文字             |

- [git logのフォーマットを指定する - Qiita](https://qiita.com/harukasan/items/9149542584385e8dea75)

## git show

### コマンド

| コマンド              | 概要                     |
| --------------------- | ------------------------ |
| `git show [コミット]` | コミット詳細を表示する。 |

- `Merge:`の部分は、`マージされるコミット マージするコミット`となる。

### オプション

| 書式              | 概要                              |
| ----------------- | --------------------------------- |
| `--oneline`       | 各コミットを1行で簡潔に表示する。 |
| `-s, --no-patch` | 差分情報を表示しない。            |
| `--name-status` | 変更されたファイルの名前とステータスのみを表示する。 |

## git blame

### コマンド

| コマンド               | 概要                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `git blame ファイル名` | 指定したファイルについて、各行の最終変更コミットを表示する。 |
