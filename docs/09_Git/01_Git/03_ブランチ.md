# Git/Git/ブランチ

## 共通

### 概要

- Gitにおけるブランチは、単にコミットを指す軽量なポインタに過ぎない。
- ブランチ・タグは、コミットIDのエイリアスである。

## git branch

### コマンド

| コマンド     | 概要                               |
| ------------ | ---------------------------------- |
| `git branch` | ローカルブランチの一覧を表示する。 |

### オプション

| 分類         | オプション                 | 概要                                                     |
| ------------ | -------------------------- | -------------------------------------------------------- |
| リモート指定 | `-r`, `--remotes`          | リモートブランチの一覧のみ表示する。                     |
| リモート指定 | `-a`, `--all`              | ローカルブランチ・リモートブランチの一覧を表示する。     |
| コミット指定 | `--contains [コミット]`    | 指定したコミットを含むブランチのみを表示する。           |
| コミット指定 | `--no-contains [コミット]` | 指定したコミットを含まないブランチのみを表示する。       |
| コミット指定 | `--merged [コミット]`      | 指定したコミットにマージ済みのブランチのみ表示する。     |
| その他       | `--format フォーマット`    | フォーマットを変更する。<br />（例：`%(refname:short)`） |
| その他       | `-v`                       | 詳細情報を表示する。                                     |
| その他       | `-vv`                      | 更に上流ブランチの情報も表示する。                       |

## git branch ブランチ名

### コマンド

| コマンド                                 | 概要                                                         |
| ---------------------------------------- | ------------------------------------------------------------ |
| `git branch ブランチ名 [派生元コミット]` | ブランチを作成する。<br />派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。 |

## git branch -m

### コマンド

| コマンド                                            | 概要                               |
| --------------------------------------------------- | ---------------------------------- |
| `git branch -m [変更前ブランチ名] 変更後ブランチ名` | 指定したブランチの名前を変更する。 |

## git checkout, switch コミット

### コマンド

| コマンド                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `git checkout [コミット]`<br />`git switch [コミット]`       | ブランチ・HEAD・インデックス・ワークツリーを、指定したコミットの状態に変更する。 |
| `git checkout -`<br />`git switch -`                         | ブランチ・HEAD・インデックス・ワークツリーを、直前のブランチの状態に変更する。 |
| `git checkout -b ブランチ名 [派生元コミット]`<br />`git switch -c, -C ブランチ名 [派生元コミット]` | 派生元コミットからブランチを作成した後、<br />ブランチ・HEAD・インデックス・ワークツリーを、その状態に変更する。 |

### その他

- コミットとしてローカルブランチ以外を指定した場合は、「detached HEAD」状態（HEADがブランチを指していない状態）となる。
- 派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。
- インデックス・ワークツリーは、今ある未コミットの変更と、指定したコミットの状態をマージした状態となる。
  （コンフリクトする場合は、チェックアウトが失敗する）
