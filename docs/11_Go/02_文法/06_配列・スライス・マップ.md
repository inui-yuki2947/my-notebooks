# Go/文法/配列・スライス・マップ

## 配列・スライス

### 型

| 型           | 例       | 概要     | 要素数 | 参照方法 | 初期値                          |
| ------------ | -------- | -------- | ------ | -------- | ------------------------------- |
| `[要素数]型` | `[3]int` | 配列     | 不変   | 値渡し   | `[0, 0, 0]`, `["", "", ""]`など |
| `[]型`       | `[]int`  | スライス | 可変   | 参照渡し | `nil`                           |

### 書式（生成）

| 書式                                | 概要                               |
| ----------------------------------- | ---------------------------------- |
| `[要素数]型{初期値1, 初期値2, ...}` | 要素数を指定して、配列を生成する。 |
| `[...]型{初期値1, 初期値2, ...}`    | 要素数を省略して、配列を生成する。 |
| `[]型{値1, 値2, ...}`               | スライスを生成する。               |

- 初期値を多く与えると、コンパイルエラーとなる。

### 書式（make）

| 書式                         | 概要                                           |
| ---------------------------- | ---------------------------------------------- |
| `make([]型, サイズ, [容量])` | 指定した型・サイズ・容量のスライスを生成する。 |

### 書式（スライス式）

| 書式                               | 名称           | 概要                                                         |
| ---------------------------------- | -------------- | ------------------------------------------------------------ |
| `配列またはスライス[low:high]`     | 簡易スライス式 | 指定した配列・スライスから、インデックス`low`から`high`までの要素をもつスライスを生成する。（`low, high`は省略可能） |
| `配列またはスライス[low:high:max]` | 完全スライス式 | 簡易スライス式の挙動に加え、容量が`max - low`となる。        |

- スライス式は、文字列にも適用できる。（インデックスはバイト列単位）

### 要素数と容量

- `len`関数で、配列・スライスの要素数を表示する。
- `cap`関数で、スライスの容量（メモリに確保された容量）を表示する。

### append

- `append`関数で、スライスの要素を追加できる。（変数への代入が必須）

  ```go
  変数 = append(スライス, 要素1, 要素2, ...)
  ```

- スライスの自動拡張が起こる場合は、参照メモリ領域が変わる。

### copy

- `copy`関数は、1番目の引数のスライスを、2番目の引数のスライスの内容で塗りつぶすようにコピーする。

  ```go
  copy(コピー先スライス, コピー元スライス)
  ```

### その他

- スライスの要素を変更する場合は、インデックスを介するなど、ポインタが効くようなアクセスを行う必要がある。
  [go - How to modify a slice element which is a struct in golang? - Stack Overflow](https://stackoverflow.com/questions/41127380/how-to-modify-a-slice-element-which-is-a-struct-in-golang)

## マップ

### 型

| 型                      | 概要                           | 例                    |
| ----------------------- | ------------------------------ | --------------------- |
| `map[キーの型]要素の型` | マップ型（連想配列のような型） | `map[string]struct{}` |

### 書式（生成）

- リテラルで生成する場合

  ```go
  map[キーの型]要素の型{
    キー1: 値1,
    キー2: 値2,
    ...
  }
  ```

- マップ内では、スライス・マップ・構造体の型名を省略できる。

### 書式（make）

| 書式                          | 概要                           |
| ----------------------------- | ------------------------------ |
| `make(map[キーの型]要素の型)` | 指定した型のマップを生成する。 |

### 書式（参照）

| 記法           | 戻り値                                                       |
| -------------- | ------------------------------------------------------------ |
| `マップ[キー]` | ・指定したキーに対応する要<br />・「キーに対応する値が存在するか」の真偽値（`ok`という名前が慣例） |

### delete

- `delete`関数は、マップから指定した要素を取り除く。

  ```go
  delete(マップ, キー)
  ```
