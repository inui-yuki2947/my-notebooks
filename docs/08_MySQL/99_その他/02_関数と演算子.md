# MySQL/その他/関数と演算子

## 日時処理

### 書式

| 書式                                 | 例                                        | 概要                                           |
| ------------------------------------ | ----------------------------------------- | ---------------------------------------------- |
| `NOW()`                              |                                           | 現在の日時。                                   |
| `CURDATE()`                          |                                           | 現在の日付。                                   |
| `DATE_ADD(日時, INTERVAL 間隔 単位)` | `DATE_ADD('2018-05-01', INTERVAL 1 DAY)`  | 指定した日時から、指定した間隔を加算した日時。 |
| `DATE_SUB(日時, INTERVAL 間隔 単位)` | `DATE_SUB('2018-05-01', INTERVAL 1 YEAR)` | 指定した日時から、指定した間隔を減算した日時。 |
| `PERIOD_ADD(yyyyMM形式文字列, 月数)` | `PERIOD_ADD(200801, 2)`                   | 指定した年月に、指定した月数を加えた年月。     |

- その他、日付の演算には`INTERVAL`式が使える。

  ```sql
  SELECT NOW() - INTERVAL 1 MONTH
  ```

## 文字列処理

### 書式

| 書式                                              | 概要                                                         |
| ------------------------------------------------- | ------------------------------------------------------------ |
| `CONCAT(文字列, ...)`                             | 文字列を結合する。                                           |
| `LOWER(文字列)`                                   | 文字列を小文字に変換する。                                   |
| `UPPER(文字列)`                                   | 文字列を大文字に変換する。                                   |
| `LPAD(文字列, 桁数, 埋める文字列)`                | 指定した文字列を、指定した桁数まで、左から、埋める文字列で埋める。 |
| `RPAD(文字列, 桁数, 埋める文字列)`                | 指定した文字列を、指定した桁数まで、右から、埋める文字列で埋める。 |
| `AES_ENCRYPT(文字列, 暗号化鍵 [,初期化ベクトル])` | 文字列を暗号化する。                                         |
| `AES_DECRYPT(文字列, 暗号化鍵 [,初期化ベクトル])` | 文字列を複合する。<br />暗号化鍵が暗号化時のものと異なると、`NULL`を返す。 |

### 参考資料

- [MySQL :: MySQL 5.6 リファレンスマニュアル :: 12.5 文字列関数](https://dev.mysql.com/doc/refman/5.6/ja/string-functions.html)

## 情報関数

### 書式

| 書式               | 概要                                                         |
| ------------------ | ------------------------------------------------------------ |
| `DATABASE()`       | 現在のデフォルトデータベースの名前を取得する。               |
| `USER()`           | 接続時に指定したユーザー名とホスト名を返す。                 |
| `CURRENT_USER()`   | 実際に認証されたユーザー名とホスト名を返す。（通常は`USER()`と同じ） |
| `LAST_INSERT_ID()` | 最後に実行された INSERT ステートメントの結果として、<br />**AUTO_INCREMENTカラム**に正常に挿入された最初の自動生成値を返す。 |

### 参考資料

- [MySQL :: MySQL 8.0 リファレンスマニュアル :: 12.16 情報関数](https://dev.mysql.com/doc/refman/8.0/ja/information-functions.html)
