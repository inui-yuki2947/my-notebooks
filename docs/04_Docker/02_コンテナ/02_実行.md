# Docker/コンテナ/実行

## docker container run, create

### コマンド

| コマンド                                             | 概要                                                         |
| ---------------------------------------------------- | ------------------------------------------------------------ |
| `docker container run イメージ [コマンド] [引数]`    | コンテナを**起動状態**で作成し、標準出力に繋ぐ。（`create`と`start`の組み合わせ） |
| `docker container create イメージ [コマンド] [引数]` | コンテナを**停止状態**で作成し、作成したコンテナIDを標準出力に出力する。 |

### オプション（起動方法系）

| オプション          | 概要                                                         |
| ------------------- | ------------------------------------------------------------ |
| `-d, --detach`      | コンテナを**デタッチド・モード**で起動する。<br />（現在のターミナルを占有しないようにする） |
| `-i, --interactive` | ホストの標準入力を、コンテナの標準入力につなげる。           |
| `-t, --tty`         | コンテナの標準出力を、ホストの標準出力につなげる。           |

### オプション（その他）

| オプション                                                   | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `-p, --publish ホストのポート:コンテナのポート`              | ポートフォワーディングを行う。                               |
| `-v, --volume [ボリュームまたはホスト側パス:]コンテナ側送信先` | ホスト側とコンテナの**ディレクトリを共有**させる。<br />ボリューム省略時は、匿名ボリュームとなる。 |
| `-w, --workdir ディレクトリ`                                 | コンテナ内での作業ディレクトリを指定できる。                 |
| `--network ネットワーク名`                                   | コンテナをネットワークに接続する。                           |
| `--name コンテナ名`                                          | コンテナ名を指定する。<br />（指定しない場合は、適当な名前が与えられる） |
| `--rm`                                                       | 終了時にコンテナを破棄する。                                 |

## docker container attach, exec

### コマンド

| コマンド                                  | 概要                                                         |
| ----------------------------------------- | ------------------------------------------------------------ |
| `docker container attach コンテナ`        | 実行中のコンテナで起動している**PID=1**のプロセスの標準入出力に接続する。<br />（exitするとコンテナが停止する） |
| `docker container exec コンテナ コマンド` | 実行中のコンテナ内で新しいコマンドを実行する。               |

### 参考資料

- [Dockerコンテナ内で操作 attachとexecの違い - Qiita](https://qiita.com/RyoMa_0923/items/9b5d2c4a97205692a560)
