# Bash/文法/変数

## 共通

### 変数の種類

| 変数         | 概要                                                         |
| ------------ | ------------------------------------------------------------ |
| 環境変数     | カレントシェル・サブシェル、及び**子プロセス**で有効である。 |
| シェル変数   | カレントシェル・サブシェルの中で有効である。                 |
| ローカル変数 | それを定義した関数、及び**その関数から呼び出した関数**で有効である。 |

### 参考資料

- [Bashの変数スコープについてのメモ - Qiita](https://qiita.com/kurukuruz/items/77b329f1c2e5e645de58)
- [シェル変数と環境変数の違い - 座敷牢日誌](https://zashikiro.hateblo.jp/entry/2017/03/31/001900)

## 定義

### コマンド

| コマンド    | 概要                                                         |
| ----------- | ------------------------------------------------------------ |
| `変数名=値` | シェル変数を定義する。<br />定義した変数は、`$変数名`で参照できる。 |

## declare, local, set, unset

### コマンド

| コマンド               | 概要                                         |
| ---------------------- | -------------------------------------------- |
| `declare 変数名[=値]`  | シェル変数を定義する。                       |
| `local 変数名[=値]`    | ローカル変数を定義する。                     |
| `declare`<br />`set`   | 環境変数・シェル変数・関数の一覧を表示する。 |
| `declare -p [変数名]`  | （指定した）シェル変数の一覧を表示する。     |
| `unset 変数名や関数名` | 変数や関数を削除する。                       |

### オプション

| コマンド              | オプション | 概要                                                         |
| --------------------- | ---------- | ------------------------------------------------------------ |
| `declare 変数名[=値]` | `-a`       | 配列の変数を定義する。                                       |
| `declare 変数名[=値]` | `-A`       | 連想配列の変数を定義する。                                   |
| `declare 変数名[=値]` | `-r`       | 読み取り専用変数の変数を定義する。<br />（`readonly 変数名[=値]`コマンドと同等） |
| `declare 変数名[=値]` | `-x`       | 環境変数を定義する。                                         |

## env, printenv

### コマンド

| コマンド                     | 概要                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| `env`, `printenv`            | 環境変数の一覧を表示する。                                   |
| `printenv 環境変数名`        | 指定した環境変数を表示する。                                 |
| `[env] 環境変数=値 コマンド` | その1回だけで有効な環境変数を作成して、コマンドを実行する。<br />（コマンド自体にその環境変数を使うと、変数展開の方が早いため、うまく展開されないことに注意） |

### 参考資料

- [printenv、env、set、exportコマンドの違いに関して](http://tooljp.com/windows/chigai/html/Linux/printenv-env-set-export-chigai.html)

## export

### コマンド

| コマンド             | 概要                                    |
| -------------------- | --------------------------------------- |
| `export`             | 環境変数の一覧を、declare文で表示する。 |
| `export 変数名[=値]` | 環境変数を作成する。                    |

## 特殊変数

### 書式

| 分類       | 書式         | 概要                                                         |
| ---------- | ------------ | ------------------------------------------------------------ |
| 引数       | `$n`, `${n}` | n番目の引数<br />10個目以降は`${10}`のように記述する必要がある。 |
| 引数       | `$#`         | 引数の数                                                     |
| 引数       | `$@`         | 引数を**スペース**で連結した文字列（基本はこちらを使うとよい） |
| 引数       | `$*`         | 引数を**区切り文字の最初の1文字**で連結した文字列            |
| 引数       | `$_`         | ひとつ前に実行したコマンドラインの最後の引数。               |
| プロセスID | `$$`         | 現在のシェルのプロセスID                                     |
| プロセスID | `$!`         | バックグラウンドで実行した直前のプロセスID                   |
| その他     | `$0`         | 起動したシェルスクリプトの名前                               |
| その他     | `$?`         | 直前に実行したコマンドの終了ステータス                       |
