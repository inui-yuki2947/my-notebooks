# Bash/ユーザー/切り替え

## su

### コマンド

| コマンド      | 概要                           |
| ------------- | ------------------------------ |
| `su`          | rootユーザーに切り替える。     |
| `su ユーザー` | 指定したユーザーに切り替える。 |

### オプション

| オプション | 概要                                                         |
| ---------- | ------------------------------------------------------------ |
| `-, -l`    | シェルをログインシェルにする。（カレントディレクトリや環境変数を初期化する） |

### その他

- 当コマンド実行後、**切り替え先ユーザー**のパスワードが求められる。
- `exit`コマンドで、元のユーザーに戻ることができる。

## sudo

### コマンド

| コマンド          | 概要                                     |
| ----------------- | ---------------------------------------- |
| `sudo [コマンド]` | rootユーザーの権限でコマンドを実行する。 |

### オプション

| オプション | 概要                                         |
| ---------- | -------------------------------------------- |
| `-l`       | 自分に許可されているコマンド一覧を表示する。 |

### その他

- 当コマンド実行後、**今のユーザー**のパスワードが求められる。
- `sudo`コマンドを使うと、`/var/log/secure`にログが残る。
- `sudo`を使っても、**リダイレクト処理の権限は変更されない。**

## visudo

### コマンド

| コマンド | 概要                                     |
| -------- | ---------------------------------------- |
| `visudo` | `/etc/sudoers`ファイルを安全に編集する。 |

## /etc/sudoers

### 概要

| ファイル       | 概要                   |
| -------------- | ---------------------- |
| `/etc/sudoers` | sudoの権限を記述する。 |

### 書式

```text
ユーザー名 ホスト名=(実行ユーザー名) [NOPASSWORD:] コマンド
```

- `NOPASSWORD:`を指定すると、実行時にパスワードを問われない。

### 例

```text
student ALL=(ALL) /sbin/shutdown
```
