# その他/情報工学/正規表現

## 共通

### 便利ツール

- [正規表現チェッカー PHP: preg_match() / JavaScript: match()](http://okumocchi.jp/php/re.php)
- [Rubular](https://rubular.com/)

### 種類

| 種類                | 使用できるメタ文字                                           | 特長                               |
| ------------------- | ------------------------------------------------------------ | ---------------------------------- |
| 基本正規表現（BRE） | `. * [ ] ^ $`<br />`\( \) \{ \}` ※1                          | エスケープすべき文字が少なくて済む |
| 拡張正規表現（ERE） | `. * [ ] ^ $`<br />`( ) { }`<br />`+ ? ｜`                   | 表現が多彩                         |
| Perl正規表現        | `. * [ ] ^ $`<br />`( ) { }`<br />`+ ? ｜`<br />`\文字`<br />量指定子の最短一致<br />先読み・後読み | 更に表現が多彩                     |

- ※1 GNU拡張が有効な場合は、`+ ? ｜`が使用可能。

### 参考資料

- [正規表現 - Wikipedia](https://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE#%E6%A7%8B%E6%96%87)
- [基本的な正規表現一覧 | murashun.jp](https://murashun.jp/article/programming/regular-expression.html)

## 正規表現

### 基本

| 書式 | 概要          |
| ---- | ------------- |
| `.`  | 任意の1文字。 |

### \文字

| 書式 | 概要                                                     | 別の表現                                                     |
| ---- | -------------------------------------------------------- | ------------------------------------------------------------ |
| `\d` | 数字                                                     | `[0-9]`                                                      |
| `\w` | アンダースコアを含む半角英数字                           | `[A-Za-z0-9_]`                                               |
| `\s` | スペース、タブ、改ページ、改行を含むホワイトスペース文字 | `[ \f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]` |

- アルファベットを大文字にすると、それ以外の文字を表す。（例：`\D`は数字以外の文字）

### 文字クラス

| 書式               | 概要                            |
| ------------------ | ------------------------------- |
| `[文字1文字2...]`  | 指定した文字のいずれか1文字     |
| `[^文字1文字2...]` | 指定した文字以外のいずれか1文字 |

### 位置指定子

| 書式 | 概要   |
| ---- | ------ |
| `^`  | 行頭。 |
| `$`  | 行末。 |

### 量指定子

| 書式    | 概要                                |
| ------- | ----------------------------------- |
| `*`     | 直前の文字の**0回以上**の繰り返し。 |
| `+`     | 直前の文字の**1回以上**の繰り返し。 |
| `?`     | 直前の文字の**0~1回**の繰り返し。   |
| `{n}`   | 直前の文字の**n回**の繰り返し。     |
| `{n,}`  | 直前の文字の**n回以上**の繰り返し。 |
| `{n,m}` | 直前の文字の**n~m回**の繰り返し。   |

- デフォルトでは**最長一致**で検索するが、量指定子の後に`?`をつけると、最短一致で検索できる。（`*?`など）

### グループ化

| 書式                        | 概要                                                         |
| --------------------------- | ------------------------------------------------------------ |
| `(文字列)`                  | 文字列をグループ化した上での文字列。（後方参照可）           |
| `(文字列1｜文字列2｜...)`   | 文字列をグループ化した上での、指定した文字列のいずれかの文字列。（後方参照可） |
| `(?:文字列)`                | 文字列をグループ化した上での文字列。（後方参照不可）         |
| `(?:文字列1｜文字列2｜...)` | 文字列をグループ化した上での、指定した文字列のいずれかの文字列。（後方参照不可） |

- [後方参照が不要なグループ化「(?: )」 - 後方参照 - Ruby正規表現の使い方](https://www.javadrive.jp/ruby/regex/backreference/index4.html)

### 後方参照

| 書式 | 概要                          |
| ---- | ----------------------------- |
| `\0` | 一致した文字列全体。          |
| `\n` | n番目にグループ化した文字列。 |

### 先読み・後読み

| 表現            | 概要       |
| --------------- | ---------- |
| `(?=パターン)`  | 肯定先読み |
| `(?!パターン)`  | 否定先読み |
| `(?<=パターン)` | 肯定後読み |
| `(?<!パターン)` | 否定後読み |

- 先読みはパターンの**先頭**、後読みはパターンの**末尾**にマッチする。

- マッチした文字列としては取得しない。

- 先読み・後読みの中では、量指定子は使えないことが多い。

### 置換後文字列

| 書式         | 概要                     |
| ------------ | ------------------------ |
| `\l文字`     | 小文字に変換した文字。   |
| `\L文字列\E` | 小文字に変換した文字列。 |
| `\u文字`     | 大文字に変換した文字。   |
| `\U文字列\E` | 大文字に変換した文字列。 |
