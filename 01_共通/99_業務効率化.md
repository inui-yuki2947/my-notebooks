# 業務効率化

## ワンライナー

### Git

- カレントリポジトリで、`develop|staging|master`以外の不要なブランチを削除する。

  ```bash
  git fetch --prune && git branch --no-contains HEAD --merged | grep -Ev "(develop|staging|master)" | xargs git branch -d
  ```

- カレント・Swaggerリポジトリで、`develop|staging|master`以外の不要なブランチを削除する。

  ```bash
  git fetch --prune && git branch --no-contains HEAD --merged | grep -Ev "(develop|staging|master)" | xargs git branch -d && ( cd enoteca-rental-cellar-swagger && git fetch --prune && git branch --no-contains HEAD --merged | grep -Ev "(master)" | xargs git branch -d )
  ```

- カレント・Swaggerリポジトリで、`develop`ブランチから同名でブランチを作成・チェックアウトする。

  ```bash
  branch_name=XXX && git checkout develop && git pull && git checkout -b $branch_name && ( cd  enoteca-rental-cellar-swagger && git checkout master && git pull && git checkout -b $branch_name )
  ```

## ブックマークレット

### 作成

- 書式

  ```text
  javascript:(JSコード)
  ```

- [ブックマークレット作成](https://crocro.com/tools/item/gen_bookmarklet.html)

### 汎用

- 現在のページへのMarkdown形式リンクテキストを、クリップボードにコピーする。[JavaScript で任意のテキストをクリップボードにコピーする｜まくろぐ](https://maku.blog/p/buk5i2o/)

  ```js
  function copyToClipboard(text){
    // テキストコピー用の一時要素を作成
    const pre = document.createElement('pre');

    // テキストを選択可能にしてテキストセット
    pre.style.webkitUserSelect = 'auto';
    pre.style.userSelect = 'auto';
    pre.textContent = text;

    // 要素を追加、選択してクリップボードにコピー
    document.body.appendChild(pre);
    document.getSelection().selectAllChildren(pre);
    const result = document.execCommand('copy');

    // 要素を削除
    document.body.removeChild(pre);

    return result;
  }

  copyToClipboard("["+document.title+"]("+location.href+")");
  ```
