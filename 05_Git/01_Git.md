# Git

## 共通

### ドキュメント

- [Git - Book](https://git-scm.com/book/ja/v2)

### 作業スペース

- 一覧

  | 種類                             | 概要                                       | 表示色 |
  | -------------------------------- | ------------------------------------------ | ------ |
  | ワークツリー（ワーキングツリー） | 今作業している場所                         | 赤色   |
  | インデックス                     | リポジトリにコミットするファイルがある場所 | 緑色   |
  | リポジトリ                       | Gitで履歴が管理された場所                  |        |

### CLI

- 引数でコミットを取る場合、省略すると原則`HEAD`となる。

## リポジトリ操作

### remote

- `remote`コマンドは、リモートリポジトリを管理する。

  | コマンド                                  | 概要                                       |
  | ----------------------------------------- | ------------------------------------------ |
  | `git remote`                              | リモートリポジトリの名前を表示する。       |
  | `git remote add リポジトリ リポジトリURL` | リモートリポジトリを追加する。             |
  | `git remote remove リポジトリ`            | リモートリポジトリを削除する。             |
  | `git remote prune リポジトリ`             | 消え残っているリモートブランチを削除する。 |

- オプション

  | コマンド     | オプション | 概要                                                 |
  | ------------ | ---------- | ---------------------------------------------------- |
  | `git remote` | `-v`       | fetchとpullそれぞれについて、URLも合わせて表示する。 |

## クローン・フォーク

### clone

- コマンド

  |コマンド|概要|
  |---|---|
  |`git clone リポジトリURL`|リモートリポジトリをローカルリポジトリに複製する。|

### fork

- `fork`コマンドは、リモートリポジトリを自分のアカウントの**リモートリポジトリ**にコピーする。

## ワークツリー・インデックス操作

### add

- コマンド

  |コマンド|概要|
  |---|---|
  |`git add ファイル`|指定したファイルをインデックスに追加（ステージ）する。|

### rm

- コマンド

  |コマンド|概要|
  |---|---|
  |`git rm ファイル`|ワークツリー・インデックスから、ファイルを削除する。|

- オプション

  |オプション|概要|
  |---|---|
  |`--cached`|インデックスからのみ、ファイルを削除できる。|

### clean

- コマンド

  |コマンド|概要|
  |---|---|
  |`git clean [パス（省略時はカレントディレクトリ）]`|管理対象外のファイルを削除する。|

- オプション

  | オプション      | 概要                           |
  | --------------- | ------------------------------ |
  | `-f, --force`   | 削除を確定する。               |
  | `-n, --dry-run` | ドライランする。               |
  | `-d`            | ディレクトリも含めて削除する。 |

## コミット操作

### commit

- コマンド

  |コマンド|概要|
  |---|---|
  |`git commit [ファイル名...]`|インデックスにあるものをコミットする。|

- オプション
  
  | オプション                 | 概要                                                         |
  | -------------------------- | ------------------------------------------------------------ |
  | `-a`                       | 管理対象ファイルが全て`add`されコミットされる。<br/>（管理対象外ファイルは、先に`add`を行っておく必要がある） |
  | `-m, --message メッセージ` | メッセージを指定する。                                       |
  | `--no-edit`                | メッセージの編集を省略する。                                 |

### revert

- コマンド

  |コマンド|概要|
  |---|---|
  |`git revert 打ち消したいコミット`|コミットを打ち消す。|

- オプション

  |オプション|概要|
  |---|---|
  |`--mainline, -m <parent-number>`|マージコミットを打ち消すことができる。|

  - `<parent-number>`は、`1`がマージされた側のブランチ、`2`がマージする側のブランチ。（なので基本的には`1`を指定する）
  - [GitでMerge CommitをRevertする方法 - Qiita](https://qiita.com/awakia/items/5fad0c454ddc7b478ff1)

## コミット表示

### log

- コマンド

  |コマンド|概要|
  |---|---|
  |`git log`|コミット履歴を表示する。|

- オプション

  | オプション                     | 概要                                                         | 例                                  |
  | ------------------------------ | ------------------------------------------------------------ | ----------------------------------- |
  | `--reverse`                    | ログを古い順に表示する。                                     |                                     |
  | `--oneline`                    | ログを一行で表示する。                                       |                                     |
  | `--pretty=format:フォーマット` | 項目のフォーマットを指定する。<br />[git logのフォーマットを指定する - Qiita](https://qiita.com/harukasan/items/9149542584385e8dea75) |                                     |
  | `--date=format:フォーマット`   | 日時のフォーマットを指定する。                               | `--date=format:"%Y/%m/%d %H:%M:%S"` |

- 項目フォーマット
  
  - `%h`：コミットID（短縮形）
  - `%x09`：タブ文字

### show

- コマンド

  |コマンド|概要|
  |---|---|
  |`git show [コミット]`|コミット詳細を表示する。|

### diff

- コマンド

  |コマンド|概要|
  |---|---|
  |`git diff コミット1..コミット2`|ファイルの差分を確認できる。|

- オプション

  | オプション    | 概要                                                      |
  | ------------- | --------------------------------------------------------- |
  | `--name-only` | ファイル名のみ出力する。                                  |
  | `--exit-code` | 差分があれば`1`、なければ`0`で終了ステータスを返す。      |
  | `--quiet`     | `--exit-code`オプションを、標準出力をしない形で適用する。 |

### AuthorとCommiter

- 一覧

  | 種類      | 概要                         |
  | --------- | ---------------------------- |
  | Author    | オリジナルのコードを書いた人 |
  | Committer | コミットをした人             |

### ドット表記

- [git diff と git log におけるドット表記](https://zenn.dev/yoichi/articles/git-dotted-notations)

## サブモジュール

### submodule

- コマンド

  |コマンド|概要|
  |---|---|
  |`git submodule`|サブモジュール一覧を表示する。|

### submodule update

- コマンド

  |コマンド|概要|
  |---|---|
  |`git sudmodule update`|サブモジュールを親で指定したコミットに更新する。|
