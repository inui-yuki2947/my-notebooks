# コマンド定義

## 共通

### 概要

- 定義方法

| 定義方法         | 引数の使用 | シェルスクリプトでの使用 | 実行環境       | 適する用途                                             |
| ---------------- | ---------- | ------------------------ | -------------- | ------------------------------------------------------ |
| エイリアス       | できない   | できない                 | カレントシェル | 対話的環境でよく実行するコマンド                       |
| 関数             | できる     | できない                 | カレントシェル | 対話的環境でよく実行する、エイリアスより複雑なコマンド |
| シェルスクリプト | できる     | できる                   | サブシェル     | カレントシェルに影響を与えたくないコマンド             |

- [When to Use an Alias vs Script vs a New Function in Bash | Baeldung on Linux](https://www.baeldung.com/linux/bash-alias-vs-script-vs-new-function)

- [In Bash, when to alias, when to script, and when to write a function? - Unix & Linux Stack Exchange](https://unix.stackexchange.com/questions/30925/in-bash-when-to-alias-when-to-script-and-when-to-write-a-function)

## エイリアス

### alias, unalias

- コマンド

| コマンド                      | 概要                                 |
| ----------------------------- | ------------------------------------ |
| `alias`                       | コマンドのエイリアス一覧を表示する。 |
| `alias エイリアス名=コマンド` | コマンドのエイリアスを登録する。     |
| `unalias エイリアス名`        | コマンドのエイリアスを削除する。     |
| `unalias -a`                  | コマンドのエイリアスを全て削除する。 |

### エイリアスの無視

- コマンド名の1文字目がクォートされていると、エイリアスは適用されない。

  ```bash
  \コマンド
  ```

## 関数

### function

- `function`コマンドは、関数を定義する。

  ```bash
  [function] 関数名() { 
    処理
  }
  ```

- `$1, $2, ...`で引数を、環境変数`FUNCNAME`で関数名を取得できる。

### 呼び出し

- 書式

  ```bash
  関数名 引数1 引数2 ...
  ```

- 関数呼び出しより関数定義を先に書く。

### その他

- コマンド

| コマンド           | 概要                     |
| ------------------ | ------------------------ |
| `export -f 関数名` | 関数をエクスポートする。 |

## シェルスクリプト

### シバン

- 直接指定する場合

  ```bash
  #!/bin/bash
  ```

- 環境変数`PATH`をもとに指定する場合

  ```bash
  #!/usr/bin/env ruby
  ```

- シバンは、ファイルを直接実行する場合のみ読み込まれる。

### その他

- シェルスクリプトのカレントディレクトリは、それを呼び出した際のカレントディレクトリとなるので、
  以下でシェルスクリプトのカレントディレクトリを統一すると便利。

  ```bash
  cd "$(dirname "$0")" || exit
  ```

## その他

### complete

- `complete`コマンドは、任意のコマンドに対して補完の動作を定義する。
