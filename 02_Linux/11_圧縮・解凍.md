# 圧縮・解凍

## ファイルの圧縮・解凍

### 共通

| 項目     | gzip         | bzip2          | xz       |
| -------- | ------------ | -------------- | -------- |
| 圧縮率   | 低           | 中             | 高       |
| 速度     | 速い         | 普通           | 遅い     |
| 拡張子   | gz           | bz2            | xz       |
| コマンド | gzip, gunzip | bzip2, bunzip2 | xz, unxz |

- Linuxでは、gzip形式をよく使う。

- コマンド書式

  ```bash
  コマンド [ファイル名...]
  ```

- `-d, --decompress`オプションで、ファイルを解凍できる。
- `-k, --keep`オプションで、元のファイルを削除しない。（デフォルトでは削除される。）

### gzip, gunzip

- `-r`オプションで、ディレクトリ内のファイルをそれぞれ圧縮する。
- `-c`オプションで、元ファイルは残したまま、標準出力に圧縮ファイルを出力する。

### zip, unzip

- `zip`コマンドは、ファイルをZIP形式で圧縮する。

  ```bash
  zip ZIPファイル名 [対象ファイル名]
  ```

- `unzip`コマンドは、ファイルをZIP形式で解凍する。

  ```bash
  unzip ZIPファイル名 対象ファイル名
  ```

## アーカイブの作成・展開

### tar（共通）

- `tar`コマンドは、複数のファイルを1つにまとめた**アーカイブファイル**を作成／展開する。
- アーカイブファイル名は、gzip形式の場合、`.tar.gz`または`.tgz`である。
- `file`コマンドで、アーカイブファイルの圧縮形式を確認できる。
- 圧縮系オプション
  - `-z, --gzip`オプションで、gzip形式で圧縮・解凍する。
  - `-j, --bzip2`オプションで、bzip2形式で圧縮・解凍する。
- その他オプション
  - `-v, --verbose`オプションで、詳細情報を表示する。
  - `-f, --file アーカイブファイル名`オプションで、アーカイブファイルを指定する（ほぼ必須）。

### tar（アーカイブ作成）

- `-c, --create`オプションで、アーカイブを作成する。

  ```bash
  tar -cf アーカイブファイル名 元ファイル名
  ```

### tar（アーカイブ展開・表示）

- `-x, --extract`オプションで、アーカイブを展開する。

  ```bash
  tar -xf アーカイブファイル名 [取り出す元ファイル名]
  ```

- `-t, --list`オプションで、アーカイブに含まれるファイル一覧を表示する。

  ```bash
  tar -tf アーカイブファイル名 [検索する元ファイル名]
  ```

### cpio

- `cpio`コマンドは、アーカイブファイルとの間で、ファイルをコピーする。

  ```bash
  cpio フラグ [オプション]
  ```

- フラグ
  - `-i`（コピーインモード）：ファイルをアーカイブファイルからコピーする。
  - `-o`（コピーアウトモード）：ファイルをアーカイブファイルにコピーする。
  - `-p`（コピーパスモード）：ファイルを別ディレクトリにコピーする。

### dd

- `dd`コマンドは、ファイルをブロック単位で読み出し、指定通り変換して出力する。

  ```bash
  dd
  ```
  
- `dd`コマンドは、ハードディスクやCD-ROMなどのデバイスの内容を、そのまま取り扱える。
- `if=入力ファイル`オプションで、入力ファイルを指定できる。
- `of=入力ファイル`オプションで、出力ファイルを指定できる。

## 解凍をラップしたコマンド

### 概要

- 下記コマンドは、gzip形式で圧縮したファイルに対して、`z`を除いたコマンドを実行できる。
  - zcat
  - zless
  - zmore
  - zgrep
  - zcmp
  - zdiff
- bzip2形式やxz形式のファイルについては、`bzcat`や`xzcat`コマンドが利用できる。
