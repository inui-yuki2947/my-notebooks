# Ruby/共通/クラス・メソッド

## クラス

### クラスの作成

- 書式

  ```ruby
  class クラス名
    定義
  end
  ```

- `self`は、メソッドのレシーバを表す。
- レシーバを省略してメソッドを呼ぶと、暗黙に`self`をレシーバとする。（`変数名=`メソッドを除く）

- `initialize`という名前でインスタンスメソッドを定義すると、それがコンストラクタとなる。

### インスタンス変数

- `@変数名`で、インスタンス変数を使用できる。
- アクセスメソッドは、`インスタンス変数名`, `インスタンス変数=`メソッドを定義するか、下記のメソッドを定義する。
  - `attr_reader :インスタンス変数名`
  - `attr_writer :インスタンス変数名`
  - `attr_accessor :インスタンス変数名`

### クラス変数

- `@@変数名`で、クラス変数を使用できる。

### クラス定数

- クラス定数は、`クラス名::定数名`で参照できる。

### アクセス修飾子

- アクセス修飾子を用いて、インスタンスメソッドのアクセスを制限できる。

- 書式1

  ```ruby
  アクセス修飾子 :メソッド名1, :メソッド名2, ...
  ```

- 書式2

  ```ruby
  アクセス修飾子
  メソッド定義1
  メソッド定義2
  ...
  ```

- アクセス修飾子
  - `public`
  - `protected`
  - `private`

### クラスメソッド

- 特異クラス定義書式1

  ```ruby
  class << クラス名
    def メソッド名(引数1, 引数2, ...)
      処理
    end
  end
  ```

- 特異クラス定義書式2

  ```ruby
  class クラス名
    class << self
      def メソッド名(引数1, 引数2, ...)
        処理
      end
    end
  end
  ```

- 書式1

  ```ruby
  def クラス名.メソッド名(引数1, 引数2, ...)
    処理
  end
  ```

- 書式2

  ```ruby
  class クラス名
    def self.メソッド名(引数1, 引数2, ...)
      処理
    end
  end
  ```

### 継承

- 書式

  ```ruby
  class クラス名 < スーパークラス名
    定義
  end
  ```

### インスタンスの作成

- `new`メソッドで、インスタンスを生成する。

## メソッド

### 概要

- メソッドは以下の3つに分類される。
  - インスタンスメソッド
  - クラスメソッド
  - 関数的メソッド

### 作成

- 書式

  ```ruby
  def メソッド名(引数1, 引数2, ...)
    処理
  end
  ```

- 書式（キーワード引数）

  ```ruby
  def メソッド名(引数1: [デフォルト値1], 引数2: [デフォルト値2], ...)
    処理
  end
  ```

- `yield`で、メソッドに与えられたブロックを実行できる。

### 呼び出し

- メソッドの引数としてハッシュを渡す場合、`{}`は省略できる。

### 可変長引数

- メソッド定義の引数を`*変数名`とすると、可変長引数を定義できる。
- メソッド呼び出しの引数を`*配列`とすると、スプレッド展開を行う。
