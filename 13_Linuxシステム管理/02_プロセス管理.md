# プロセス管理

## ps, pstree

### コマンド

| コマンド                              | 概要                                                         |
| ------------------------------------- | ------------------------------------------------------------ |
| `ps`                                  | 現在動作しているプロセスを表示する。                         |
| `pstree [プロセスIDまたはユーザー名]` | 現在動作しているプロセスについて、階層構造を分かりやすく表示する。<br />（`ps f`コマンドと同じ） |

### オプション（`ps`）

| オプション | 概要                                               |
| ---------- | -------------------------------------------------- |
| `a`        | 全てのユーザーのプロセスを表示する。               |
| `x`        | 実行端末のないプロセスを表示する。                 |
| `-e`       | 全てのプロセスを表示する。（`ax`オプションと同じ） |
| `u`        | 実行ユーザー名などを表示する。                     |
| `l, -l`    | 親プロセスのPID（PPID）やナイス値も表示する。      |
| `f`        | 階層構造を分かりやすく表示する。                   |

### その他

- プロセスは、PID、及びプロセスを開始したユーザーから引き継がれたUIDとGIDを持つ。

## pgrep

### コマンド

| コマンド           | 概要                                        |
| ------------------ | ------------------------------------------- |
| `pgrep プロセス名` | 指定したプロセス名に対応するPIDを表示する。 |

## lsof

### コマンド

| コマンド        | 概要                                       |
| --------------- | ------------------------------------------ |
| `lsof [パス名]` | **現在開いているファイル一覧**を表示する。 |

### オプション

| オプション       | 概要                               |
| ---------------- | ---------------------------------- |
| `-i :ポート番号` | ポート番号やプロトコルを指定する。 |
| `-p プロセスID`  | プロセスIDを指定する。             |
| `-P`             | ポート番号を数字で表示する。       |

### 例

- 接続を受け付けているポートに絞り込む場合

  ```bash
  lsof -p プロセスID | grep LISTEN
  ```
