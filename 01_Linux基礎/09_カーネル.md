# カーネル

## 共通

### カーネルバージョン

| カーネルバージョン                                           | 概要                                                   |
| ------------------------------------------------------------ | ------------------------------------------------------ |
| `メジャー番号.マイナー番号.メンテナンス番号`（Linux 3.0以前） | マイナー番号が奇数の場合は開発版、偶数の場合は安定版。 |
| `メジャー番号.マイナー番号-rc番号`（Linux 3.0以降）          | 開発版。（リリース候補）                               |
| `メジャー番号.マイナー番号.メンテナンス番号`（Linux 3.0以降） | 安定版。                                               |

- [Linuxカーネルのバージョン番号 - Linux技術者認定 LinuC | LPI-Japan](https://linuc.org/study/knowledge/551/)

### エクストラバージョン

- `カーネルバージョン-エクストラバージョン`の形式で、ベンダーやカーネルビルド実行者が、任意にバージョンを指定できる。

## uname

### コマンド

| コマンド | 概要                   |
| -------- | ---------------------- |
| `uname`  | カーネル名を表示する。 |

### オプション

| オプション             | 概要                             |
| ---------------------- | -------------------------------- |
| `-a, --all`            | カーネルの全ての情報を表示する。 |
| `-r, --kernel-release` | カーネルバージョンを表示する。   |

## カーネル関連ファイル

### ファイル

| ファイル                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `/proc/version`                                              | カーネルバージョンが記載されたファイル。                     |
| `/usr/src/linux/Makefile`<br />`/usr/src/kernels/カーネルバージョン/Makefile`<br />`/usr/src/linux-headers-カーネルバージョン/Makefile` | カーネルのMakefile。                                         |
| `/boot/vmlinuz-カーネルバージョン`                           | カーネルイメージファイル。（Linuxカーネルを格納したファイル） |

## カーネルモジュール

### 概要

- カーネルモジュールとは、カーネルを構成する機能をモジュール化したもの。

### ファイル

| ファイル                           | 概要                                                       |
| ---------------------------------- | ---------------------------------------------------------- |
| `/lib/modules/カーネルバージョン/` | カーネルモジュールが配置されるディレクトリ。               |
| `/proc/modules`                    | ロードされているカーネルモジュールに関する情報のファイル。 |

## lsmod, modinfo

### コマンド

| コマンド                         | 概要                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| `lsmod`                          | ロードされているカーネルモジュールを表示する。<br/>（`/proc/modules`ファイルを見やすく表示する） |
| `modinfo [カーネルモジュール名]` | カーネルモジュールの情報を表示する。                         |

## insmod, rmmod

### コマンド

| コマンド                          | 概要                                 |
| --------------------------------- | ------------------------------------ |
| `insmod カーネルモジュールのパス` | カーネルモジュールをロードする。     |
| `rmmod カーネルモジュール名`      | カーネルモジュールをアンロードする。 |

## modprobe, depmod

### コマンド

| コマンド                        | 概要                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| `modprobe カーネルモジュール名` | 依存関係を解決して（`modules.dep`ファイルを参照して）、<br />カーネルモジュールのロード・アンロードを行う。 |
| `depmod`                        | カーネルモジュールの依存関係情報を更新する。<br />（`modules.dep`ファイルを生成する） |

### ファイル

| ファイル                                      | 概要                                                         |
| --------------------------------------------- | ------------------------------------------------------------ |
| `/lib/modules/カーネルバージョン/modules.dep` | カーネルモジュールの依存関係を記述する。                     |
| `/etc/modprobe.conf`                          | モジュールのロード・アンロードの際の前後処理やパラメータを記述する。 |
