# ログ

## 共通

### 概要

- システムのログを取得して処理するソフトウェアとしては、下記などがある。
  - syslog
  - rsyslog
  - syslog-ng

### ログファイル

- `/var/log/messages`は、カーネルログなどが記録される、メインのログファイル。
- `/var/log/secure`は、セキュリティに関するログが記録される。
- `/var/log/maillog`は、メールに関するログが記録される。

### /etc/rsyslog.conf

- rsyslogの設定は、`/etc/rsyslog.conf`ファイル、及び`/etc/rsyslog.d`ディレクトリ以下のファイルで行う。

- 書式

  ```text
  ファシリティ.プライオリティ[;ファシリティ.プライオリティ...] 出力先
  ```

- 「ファシリティ」は、メッセージの生成元を表す。

  - `*`を指定すると、ログイン中の全てのユーザーの端末に出力する。

- 「プライオリティ」は、（表示を行う最低の）メッセージの重要度を表す。
  - `*`を設定すると、全てのプライオリティとなる。
  - `none`を設定すると、ログを除外する。

### logger

- `logger`コマンドは、ログメッセージを生成する。

  ```bash
  logger メッセージ
  ```

- `-p ファシリティ.プライオリティ`オプションで、ファシリティ・プライオリティを指定できる。

- `-t タグ`オプションで、タグを指定できる。

### systemd-cat

- `systemd-cat`コマンドは、systemdを採用したシステムで、コマンドの実行結果をジャーナルに書き込む。

  ```bash
  systemd-cat コマンド
  ```

### ローテーション

- ログのローテーション機能は、logrotateユーティリティが提供している。
- `/etc/logrotate.conf`ファイルで設定を行う。

TODO このページをサービス管理のページへ移行
