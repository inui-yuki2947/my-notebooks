# Gitブランチ

## 共通

### 概要

- Gitにおけるブランチは、単にコミットを指す軽量なポインタに過ぎない。
- ブランチ・タグは、コミットIDのエイリアスである。

## ブランチ・タグ操作

### branch

- コマンド

  | コマンド                                        | 概要                                                         |
  | ----------------------------------------------- | ------------------------------------------------------------ |
  | `branch`                                        | ブランチ一覧を表示する。                                     |
  | `branch -m [変更前ブランチ名] 変更後ブランチ名` | ブランチ名を変更する。                                       |
  | `branch ブランチ名 [派生元コミット]`            | ブランチを作成する。<br />派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。 |
  | `checkout -b ブランチ名 [派生元コミット]`       | ブランチを作成して、チェックアウトする。 <br />派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。 |

- オプション

  | オプション            | 概要                                                 |
  | --------------------- | ---------------------------------------------------- |
  | `-a`                  | リモートブランチも表示する。                         |
  | `-v`                  | 詳細情報を表示する。                                 |
  | `-vv`                 | 更に上流ブランチの情報も表示する。                   |
  | `--merged [コミット]` | 指定したコミットにマージ済みのブランチのみ表示する。 |

### tag

- コマンド

  | コマンド                                | 概要                 |
  | --------------------------------------- | -------------------- |
  | `git tag`                               | タグ一覧を表示する。 |
  | `git tag タグ名 [タグを付けるコミット]` | タグを作成する。     |

## ブランチの移動

### checkout, reset

- コマンド

  | コマンド                     | ブランチ    | HEAD       | インデックス | ワークツリー | 概要                                                         |
  | ---------------------------- | ----------- | ---------- | ------------ | ------------ | ------------------------------------------------------------ |
  | `checkout [コミット]`        | ○ ※1 | ○   | △ ※2 | △ ※2 | 指定コミットの状態に変更する。                            |
  | `reset [コミット]`           | ×  | ○   | ○ ※3 | × ※3 | 指定コミットの状態に変更する。                           |
  | `checkout コミット ファイル` | ×  | × | ○     | ○     | 指定コミットの状態に変更する。                 |
  | `reset コミット ファイル`  | ×  | × | ○     | ×   | 指定コミットの状態に変更する。 |
  | `checkout ファイル` | × | × | × | ○ | インデックスの状態に変更する。 |

  - ※1 ローカルブランチ以外を指定した場合は、「detached HEAD」状態（HEADがブランチを指していない状態）となる。
  - ※2 既存の変更点は引き継がれる。
  - ※3 オプションにより可変。

- [Git の Reset, Checkout, Revert の違い - yu8mada](https://yu8mada.com/2018/06/01/the-difference-between-reset-checkout-and-revert-in-git/)

- オプション（`reset [コミット]`）

  | オプション              | インデックス | ワークツリー |
  | ----------------------- | ------------ | ------------ |
  | `--soft`                | 変更しない   | 変更しない   |
  | `--mixed`（デフォルト） | 変更する     | 変更しない   |
  | `--hard`                | 変更する     | 変更する     |

## ブランチの合流

### merge

- コマンド

  |コマンド|概要|
  |---|---|
  |`git merge [コミット]`|指定したコミット（省略時は上流ブランチ）をマージする。|

### rebase

- コマンド

  | コマンド                | 概要                                                     |
  | ----------------------- | -------------------------------------------------------- |
  | `git rebase [コミット]` | 指定したコミット（省略時は上流ブランチ）をリベースする。 |
  
- オプション

  | オプション          | 概要                                                    |
  | ------------------- | ------------------------------------------------------- |
  | `-i, --interactive` | 対話的にリベースを行う。                                |
  | `--autosquash`      | メッセージに`fixup!`を付けたコミットを、`fixup`とする。 |
