# ブランチ管理

## 共通

### 概要

- Gitにおけるブランチは、単にコミットを指す軽量なポインタに過ぎない。
- ブランチ・タグは、コミットIDのエイリアスである。

## branch

### コマンド

| コマンド                                        | 概要                                                         |
| ----------------------------------------------- | ------------------------------------------------------------ |
| `branch`                                        | ブランチ一覧を表示する。                                     |
| `branch -m [変更前ブランチ名] 変更後ブランチ名` | ブランチ名を変更する。                                       |
| `branch ブランチ名 [派生元コミット]`            | ブランチを作成する。<br />派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。 |

### オプション

| オプション            | 概要                                                 |
| --------------------- | ---------------------------------------------------- |
| `-r`, `--remotes`     | リモートブランチのみ表示する。                       |
| `-a`, `--all`         | リモートブランチも表示する。                         |
| `-v`                  | 詳細情報を表示する。                                 |
| `-vv`                 | 更に上流ブランチの情報も表示する。                   |
| `--merged [コミット]` | 指定したコミットにマージ済みのブランチのみ表示する。 |

## tag

### コマンド

| コマンド                                | 概要                 |
| --------------------------------------- | -------------------- |
| `git tag`                               | タグ一覧を表示する。 |
| `git tag タグ名 [タグを付けるコミット]` | タグを作成する。     |

### オプション（`git tag タグ名`）

| オプション                 | 概要                           |
| -------------------------- | ------------------------------ |
| `-a, --annotate`           | メッセージ付きタグを作成する。 |
| `-m, --message メッセージ` | メッセージを付与する。         |

## checkout コミット

### コマンド

| コマンド                                      | 概要                                                         |
| --------------------------------------------- | ------------------------------------------------------------ |
| `git checkout [コミット]`                     | ブランチ・HEAD・インデックス・ワークツリーを、指定したコミットの状態に変更する。 |
| `git checkout -b ブランチ名 [派生元コミット]` | 派生元コミットからブランチを作成した後、<br />ブランチ・HEAD・インデックス・ワークツリーを、その状態に変更する。 |

### その他

- コミットとしてローカルブランチ以外を指定した場合は、「detached HEAD」状態（HEADがブランチを指していない状態）となる。
- 派生元コミットでリモートブランチを指定すると、それが上流ブランチとなる。
- インデックス・ワークツリーは、今ある未コミットの変更と、指定したコミットの状態をマージした状態となる。
  （コンフリクトする場合は、チェックアウトが失敗する）

## checkout, reset

### コマンド

| コマンド                     | HEAD       | インデックス | ワークツリー | 概要                                                         |
| ---------------------------- | ---------- | ------------ | ------------ | ------------------------------------------------------------ |
| `reset [コミット]`           | ○   | ○ ※1 | × ※1 | 指定コミットの状態に変更する。                           |
| `checkout コミット ファイル` | × | ○     | ○     | 指定コミットの状態に変更する。                 |
| `reset コミット ファイル`  | × | ○     | ×   | 指定コミットの状態に変更する。 |
| `checkout ファイル` | × | × | ○ | インデックスの状態に変更する。 |

- ※1 オプションにより可変。
- [Git の Reset, Checkout, Revert の違い - yu8mada](https://yu8mada.com/2018/06/01/the-difference-between-reset-checkout-and-revert-in-git/)

### オプション（`reset [コミット]`）

| オプション              | インデックス | ワークツリー |
| ----------------------- | ------------ | ------------ |
| `--soft`                | 変更しない   | 変更しない   |
| `--mixed`（デフォルト） | 変更する     | 変更しない   |
| `--hard`                | 変更する     | 変更する     |
