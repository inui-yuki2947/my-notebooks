# 変数・関数

## 表示

### env, printenv, export

- コマンド

  | コマンド              | 概要                                    |
  | --------------------- | --------------------------------------- |
  | `env`, `printenv`     | 環境変数の一覧を表示する。              |
  | `printenv 環境変数名` | 指定した環境変数を表示する。            |
  | `export`              | 環境変数の一覧を、declare文で表示する。 |
  
- [printenv、env、set、exportコマンドの違いに関して](http://tooljp.com/windows/chigai/html/Linux/printenv-env-set-export-chigai.html)

### set, declare

- コマンド

  | コマンド         | 概要                                         |
  | ---------------- | -------------------------------------------- |
  | `set`, `declare` | 環境変数・シェル変数・関数の一覧を表示する。 |

- オプション（`declare`）

  | オプション    | 概要                                     |
  | ------------- | ---------------------------------------- |
  | `-p [変数名]` | （指定した）シェル変数のみ表示する。     |
  | `-f [関数名]` | （指定した）関数の名前と内容を表示する。 |
  | `-F [関数名]` | （指定した）関数の名前のみ表示する。     |

## 変数

### 変数の種類

- 変数の種類

  | 変数         | 概要                                                         |
  | ------------ | ------------------------------------------------------------ |
  | 環境変数     | カレントシェル・サブシェル、及び**子プロセス**で有効である。 |
  | シェル変数   | カレントシェル・サブシェルの中で有効である。                 |
  | ローカル変数 | それを定義した関数、及び**その関数から呼び出した関数**で有効である。 |

- [Bashの変数スコープについてのメモ - Qiita](https://qiita.com/kurukuruz/items/77b329f1c2e5e645de58)

- [シェル変数と環境変数の違い - 座敷牢日誌](https://zashikiro.hateblo.jp/entry/2017/03/31/001900)

### 環境変数

- 環境変数

  | 環境変数 | 概要                                                         | デフォルト値                 |
  | -------- | ------------------------------------------------------------ | ---------------------------- |
  | `IFS`    | 「Internal Filed Separator」の略で、シェルの**区切り文字**。 | 半角スペース・タブ・改行文字 |
  | `RANDOM` | `0 ~ 32767`の範囲のランダムな数値。                          |                              |

### 変数の定義

- コマンド

  | コマンド                                             | 概要                           |
  | ---------------------------------------------------- | ------------------------------ |
  | `export 変数名[=値]`                                 | 環境変数を定義する。           |
  | `declare 変数名[=値]`                                | 変数を定義する。               |
  | `declare -r 変数名[=値]`<br />`readonly 変数名[=値]` | 読み取り専用の変数を定義する。 |
  | `local 変数名[=値]`                                  | ローカル変数を定義する。       |

### env 環境変数=値 コマンド

- コマンド

  |コマンド|概要|
  |---|---|
  |`[env] 環境変数=値 コマンド`|その1回だけで有効な環境変数を定義して、コマンドを実行する。|

## 配列・連想配列

### 作成

- コマンド

  |コマンド|概要|
  |---|---|
  |`変数名=(値1 値2 ...)`|配列の変数を定義する。|
  |`変数名=([キー1]=値1 [キー2]=値2 ...)`|連想配列の変数を定義する。|
  |`declare -a 変数名[=内容]`|配列の変数を定義する。|
  |`declare -A 変数名[=内容]`|連想配列の変数を定義する。|

### 代入

- コマンド

  | コマンド                  | 概要                     |
  | ------------------------- | ------------------------ |
  | `変数名[インデックス]=値` | 配列要素に代入する。     |
  | `変数名[キー]=値`         | 連想配列要素に代入する。 |

### 取得

- コマンド

  | 記法                      | 概要                                   |
  | ------------------------- | -------------------------------------- |
  | `$変数名`                 | インデックス0の要素                    |
  | `${変数名[インデックス]}` | 指定したインデックスの要素             |
  | `${変数名[@]}`            | 全ての要素をスペースで連結した文字列   |
  | `${変数名[*]}`            | 全ての要素を区切り文字で連結した文字列 |
  | `${#変数名[@]}`           | 要素数                                 |
  | `${!変数名[@]}`           | インデックス一覧                       |

## 関数

### function

- `function`コマンドは、関数を定義する。

  ```bash
  [function] 関数名() { 
    処理
  }
  ```

- `$1, $2, ...`で引数を、環境変数`FUNCNAME`で関数名を取得できる。

### 呼び出し

- 書式

  ```bash
  関数名 引数1 引数2 ...
  ```

- 関数呼び出しより関数定義を先に書く。

## 削除

### unset

- コマンド

  | コマンド               | 概要                   |
  | ---------------------- | ---------------------- |
  | `unset 変数名や関数名` | 変数や関数を削除する。 |
