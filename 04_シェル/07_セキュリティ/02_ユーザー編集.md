# シェル/セキュリティ/ユーザー編集

## vipw

### コマンド

| コマンド | 概要                                    |
| -------- | --------------------------------------- |
| `vipw`   | `/etc/passwd`ファイルを安全に編集する。 |

## /etc/passwd, /etc/group

### ファイル

| ファイル      | 概要                       | 書式                                                         | 例                                         |
| ------------- | -------------------------- | ------------------------------------------------------------ | ------------------------------------------ |
| `/etc/passwd` | ユーザー情報が記述される。 | `ユーザー名:パスワード:UID:プライマリグループID:コメント:ホームディレクトリ:ログインシェル` | `user01:x:500:500::/home/user01:/bin/bash` |
| `/etc/group`  | グループ情報が保存される。 | `グループ名:グループパスワード:GID:サブグループとして属するメンバー` | `hoge_group:x:501:hoge_user3,hoge_user2`   |

### その他

- UIDは、rootユーザーは`0`、一般ユーザーは`1000`以降の番号となる。

## /etc/skel/

### ファイル

| ファイル     | 概要                                                       |
| ------------ | ---------------------------------------------------------- |
| `/etc/skel/` | 作成するホームディレクトリのデフォルトファイルを配置する。 |

## useradd, usermod, userdel

### コマンド

| コマンド             | 概要                 |
| -------------------- | -------------------- |
| `useradd ユーザー名` | ユーザーを作成する。 |
| `usermod ユーザー名` | ユーザーを編集する。 |
| `userdel ユーザー名` | ユーザーを削除する。 |

### オプション（`useradd`）

| オプション               | 概要                                                 |
| ------------------------ | ---------------------------------------------------- |
| `-g グループ名またはGID` | プライマリグループを指定する。                       |
| `-G グループ名またはGID` | プライマリグループ以外に所属するグループを指定する。 |
| `-c コメント`            | コメントを指定する。                                 |
| `-d パス`                | ホームディレクトリを指定する。                       |
| `-s パス`                | デフォルトシェルを指定する。                         |

### オプション（`usermod`）

| オプション     | 概要                           |
| -------------- | ------------------------------ |
| `-L, --lock`   | パスワードをロックする。       |
| `-U, --unlock` | パスワードのロックを解除する。 |

### オプション（`userdel`）

| オプション | 概要                           |
| ---------- | ------------------------------ |
| `-r`       | ホームディレクトリも削除する。 |

## adduser, deluser

### 概要

- `adduser, deluser`コマンドは、**対話的に**ユーザーを追加・削除する。

## groupadd, groupmod, groupdel

### コマンド

| コマンド              | 概要                 |
| --------------------- | -------------------- |
| `groupadd グループ名` | グループを作成する。 |
| `groupmod グループ名` | グループを編集する。 |
| `groupdel グループ名` | グループを削除する。 |

### オプション（`groupmod`）

| オプション      | 概要                   |
| --------------- | ---------------------- |
| `-n グループ名` | グループ名を変更する。 |
