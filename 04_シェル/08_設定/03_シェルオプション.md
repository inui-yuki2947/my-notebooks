# シェル/設定/シェルオプション

## 共通

### コマンド

| コマンド | 概要                                           | 使用される環境変数 |
| -------- | ---------------------------------------------- | ------------------ |
| `set`    | `set`用のシェルオプションを管理する。          | `SHELLOPTS`        |
| `shopt`  | `set`, `shopt`用のシェルオプションを管理する。 | `BASHOPTS`         |

## set

### コマンド

| コマンド                                                     | 概要                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `set -o`                                                     | 現在のシェルオプションの設定を表示する。                     |
| `set +o`                                                     | 現在のシェルオプションの設定にするためのコマンドを表示する。 |
| `set -ショートオプション`<br />`set -o ロングオプション` | シェルオプションを有効にする。                               |
| `set +ショートオプション`<br />`set +o ロングオプション` | シェルオプションを無効にする。                               |
| `bash -ショートオプション [ファイル名]`<br />`bash -o ロングオプション [ファイル名]` | シェルオプションを有効にしてスクリプトを実行する。           |
| `bash +ショートオプション [ファイル名]`<br />`bash +o ロングオプション [ファイル名]` | シェルオプションを無効にしてスクリプトを実行する。           |

### シェルオプション

| ショートオプション | ロングオプション | 概要                                                         |
| ------------------ | ---------------- | ------------------------------------------------------------ |
| `a`                | `allexport`      | シェル変数・関数の定義と同時に`export`する。                 |
| `n`                | `noexec`         | コマンドを読み込むだけで実行しない。                         |
| `e`                | `errexit`        | コマンドが1つでもエラーになったら、直ちにシェルを終了する。  |
| `u`                | `nounset`        | パラメーター展開中に、設定していない変数があったらエラーとする。 |
| `c`                | `noclobber`      | リダイレクトで既存のファイルを上書きしない。                 |
| `x`                | `xtrace`         | 実際に実行されたコマンドを表示する。                         |
| `v`                | `verbose`        | 書いたままのコマンドを表示する。                             |

### その他

- シェルオプション`x`とヌルコマンドを組み合わせて、デバッグメッセージを出力するテクニックがある。
  （当該コマンドで終了ステータスが変わることに注意）

  ```bash
  : デバッグ出力したい内容
  ```

## shopt

### コマンド

| コマンド                      | 概要                                   |
| ----------------------------- | -------------------------------------- |
| `shopt`                      | シェルオプションの一覧を表示する。     |
| `shopt シェルオプション名`    | 指定したシェルオプションを表示する。   |
| `shopt -s`                    | 有効なシェルオプションのみ表示する。   |
| `shopt -u`                    | 無効なシェルオプションのみ表示する。   |
| `shopt -s シェルオプション名` | 指定したシェルオプションを有効にする。 |
| `shopt -u シェルオプション名` | 指定したシェルオプションを無効にする。 |

### オプション

| オプション | 概要                                            |
| ---------- | ----------------------------------------------- |
| `-o`       | `set`コマンドで使用するオプションについて扱う。 |

### シェルオプション

| シェルオプション | 概要                                 |
| ---------------- | ------------------------------------ |
| `globstar`       | パス名展開で、`**`を使用可能にする。 |
