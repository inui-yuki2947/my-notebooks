# シェル/共通/リダイレクトとパイプ

## 共通

### ファイルディスクリプタ

| ファイルディスクリプタ | 概要           |
| ---------------------- | -------------- |
| `0`                    | 標準入力       |
| `1`                    | 標準出力       |
| `2`                    | 標準エラー出力 |

## リダイレクト

### 記法

| 記法            | 概要                                       |
| --------------- | ------------------------------------------ |
| `コマンド n>&m` | n番のリダイレクトをm番にする。             |
| `コマンド >&m`  | 1番のリダイレクト（標準出力）をm番にする。 |

- リダイレクトの変更は、記述した順に行われる。（順不同ではない）

- 上書き時は、ファイルの内容を空にしてから処理が行われるため、**同じファイルを読み込みつつ上書きはできない。**

### 例

| 記法                                                   | 概要                                                         |
| ------------------------------------------------------ | ------------------------------------------------------------ |
| `コマンド 2>&1`                                        | 標準エラー出力を、標準出力に出力する。                       |
| `コマンド 2>&1 > ファイル`                             | 標準エラー出力を標準出力に出力し、標準出力をファイルに出力する |
| `コマンド > ファイル 2>&1`<br />`コマンド &> ファイル` | 標準出力・エラー出力を、まとめてファイルに出力する           |

## パイプライン

### 概要

- パイプラインでつないだコマンドは、サブシェルで実行される。

### 例

| 記法                       | 概要                                                         |
| -------------------------- | ------------------------------------------------------------ |
| `コマンド 2>&1 ｜ コマンド` | 標準出力・エラー出力を、まとめてパイプする。                 |
| `コマンド ｜& コマンド`     | 標準出力・エラー出力を、まとめてパイプする。（省略記法、BSDでは使えない？） |

## ヒアドキュメント

### 記法

```bash
コマンド << 終了文字列
  内容
終了文字列
```

- ヒアドキュメントの内容は、コマンドの**標準入力**として実行される。
- 終了文字列としては、`EOF`などがよく使われる。
- ヒアドキュメントの内側では各種展開が行われるが、
  展開をさせたくない場合は、`<< 'EOF'`など、終了文字列をクォートする。

## ヒアストリング

### 記法

```bash
コマンド <<< 文字列
```

## その他

### ハイフン

- `cat, diff, vim, wget`コマンドで、`-`を引数に渡すと、標準入出力として扱われる。
  [git, cd, su, cat, diff, vim...-(ハイフン)でできること@コマンドライン - Qiita](https://qiita.com/ryosukes/items/b9a3b2913f72e1127e58#cat-diff-vim-wget%E3%81%A7%E3%83%8F%E3%82%A4%E3%83%95%E3%83%B3%E3%82%92%E5%BC%95%E6%95%B0%E3%81%AB%E6%B8%A1%E3%81%99%E3%81%A8)
