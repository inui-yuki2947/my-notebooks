# Perl

## 共通

### 概要

- コマンド

  | コマンド                          | 概要                                                         |
  | --------------------------------- | ------------------------------------------------------------ |
  | `perl ファイル名 [引数...]`       | perlファイルを実行する。                                     |
  | `perl -e スクリプト [ファイル名]` | 指定したファイル（省略時は標準入力）に対して、Perlスクリプトを実行する。 |

- オプション

  | オプション   | 概要                                                         |
  | ------------ | ------------------------------------------------------------ |
  | `-n`         | 入力の各行に対して、コマンドを実行する。<br />（`while (<>) { スクリプト }`とする） |
  | `-p`         | 入力の各行に対して、コマンドを実行して出力する。<br/>（`while (<>) { スクリプト } continue { print; }`とする） |
  | `-i[拡張子]` | 拡張子を付けたファイルに出力する。                           |
  | `-l`         | 出力後に改行を行う。                                         |
  | `-0`         | 入力レコードの区切り文字を指定する。（未指定時はヌル文字）   |

- [日本語 perl texinfo - Option](https://flex.phys.tohoku.ac.jp/texi/perl/perl_4.html)

- [Perl Lesson 1](https://www.gsid.nagoya-u.ac.jp/ohna/perl_lesson/perl01.html)

- [Perlワンライナー - eオプションの解説 - Perlゼミ|Perlの基礎をインストールからサンプルで丁寧に解説](https://perlzemi.com/blog/20161121147982.html)

- [awkユーザーのためのPerlワンライナー - 忘れないようにメモっとく](https://akiniwa.hatenablog.jp/entry/2014/12/20/194640)

## 文法

### 概要

- [Perl基礎文法最速マスター - Perlゼミ|Perlの基礎をインストールからサンプルで丁寧に解説](https://perlzemi.com/blog/20091226126425.html)
- [まくまく Perl ノート](https://maku77.github.io/perl/)

### 基礎

- 文法のチェック

  ```perl
  use strict;
  use warnings;
  ```

### 変数

- 記法

  | 記法         | 概要                     |
  | ------------ | ------------------------ |
  | `my $変数名` | スカラ変数を定義する。   |
  | `my @変数名` | 配列変数を定義する。     |
  | `my %変数名` | ハッシュ変数を定義する。 |
  
- 定義済み変数

  | 定義済み変数 | 概要                                          |
  | ------------ | --------------------------------------------- |
  | `$_`         | 最後に読み込んだレコード                      |
  | `$.`         | レコード番号                                  |
  | `$/`         | レコードの区切り文字                          |
  | `$&`         | マッチした文字列全体                          |
  | `` $` ``     | マッチした文字列の、前の文字列                |
  | `$'`         | マッチした文字列の、後の文字列                |
  | `$n`         | マッチした文字列の、括弧で囲ったn番目の文字列 |

- [マッチした部分文字列の取得 - Perlにおける正規表現](https://www.javadrive.jp/perl/regex/ref/)

## 条件分岐

### 比較演算子

- 書式

  | 書式                 | 概要                     |
  | -------------------- | ------------------------ |
  | `数値1 == 数値2`     | 数値が等しいかどうか。   |
  | `文字列1 eq 文字列2` | 文字列が等しいかどうか。 |

### if

- 記法（複数行）

  ```perl
  if (条件) {
      処理
  } elsif (条件) {
      処理
  } else {
      処理
  }
  ```
  
- 記法（1行）

  ```perl
  処理 if 条件
  ```

### unless

- 記法（複数行）

  ```perl
  unless (条件) {
      処理
  }
  ```

- 記法（1行）

  ```perl
  処理 unless 条件
  ```

### 三項演算子

- 記法

  ```perl
  条件 ? 値1 : 値2
  ```

## 繰り返し

### while

- 記法

  ```perl
  while (条件) {
      処理
  } continue {
      次の条件式が評価される前に実行する処理
  }
  ```

### for

- 記法（複数行）

  ```perl
  for (初期化式; 条件式; インクリメント式) {
      処理
  }
  ```

- 記法（1行）

  ```perl
  処理 for 配列
  ```

## その他

### 行入力演算子・ダイヤモンド演算子

- 記法

  | 記法                          | 概要                                                         |
  | ----------------------------- | ------------------------------------------------------------ |
  | `[my $変数名 =] <ファイル名>` | 指定したファイルから、1行ずつ読み込み、変数に代入する。      |
  | `[my $変数名 =] <>`           | コマンドライン引数で指定したファイルまたは標準入力から、1行ずつ読み込み、変数に代入する。 |

- `my $変数名 =`を省略すると、`$_ =`となる。
- 読み込む行がなくなると、`undef`を返す。

### 正規表現

- 式

  | 式                                                  | 概要                                                     |
  | --------------------------------------------------- | -------------------------------------------------------- |
  | `[変数 =~] /正規表現/`<br />`[変数 =~] m/正規表現/` | 変数の文字列が正規表現にマッチしたかを、真偽値で返す。   |
  | `[変数 =~] s/置換前/置換後/`                        | 変数の文字列を置換した結果を、変数に代入する。           |
  | `[変数 =~] y/置換前/置換後/`                        | 変数の文字列を文字単位で置換した結果を、変数に代入する。 |

- `変数 =~`を省略すると、`$_ =~`となる。

- 改行の扱い

  | モード                     | 概要                                                         |
  | -------------------------- | ------------------------------------------------------------ |
  | デフォルト                 | `^, $`は、文字列全体の開始・終了にマッチする。<br />`.`は、改行文字を除く文字列にマッチする。 |
  | `/m`修飾子（複数行モード） | `^, $`が、各行の開始・終了にもマッチするようになる。         |
  | `/s`修飾子（単一行モード） | `.`が、改行文字を除む文字列にマッチするようになる。          |

- [Perl：正規表現を用いた文字列の検索・置換](https://www.bold.ne.jp/engineer-club/perl-regular-expression)

### defined

- 記法

  | 記法          | 概要                                     |
  | ------------- | ---------------------------------------- |
  | `defined(値)` | 値が未定義であるかどうかを真偽値で返す。 |

### chomp

- 記法

  | 記法            | 概要                                       |
  | --------------- | ------------------------------------------ |
  | `chomp`         | `$_`の末尾の改行文字を削除する。           |
  | `chomp(文字列)` | 指定した文字列の末尾の改行文字を削除する。 |
