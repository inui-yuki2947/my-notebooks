# 文字列処理

## 文字列出力

### echo

- コマンド
  
  | コマンド           | 概要                       |
  | ------------------ | -------------------------- |
  | `echo [文字列...]` | 文字列及び改行を出力する。 |
  
- オプション
  
  |オプション|概要|
  |---|---|
  |`-e`|エスケープシーケンスを解釈する。<br />（BSD系では、エスケープシーケンス`\e`は解釈されない？）|
  |`-n`|改行を出力しない。|

### printf

- コマンド

  |コマンド|概要|
  |---|---|
  |`printf 書式文字列 [文字列...]`|文字列を整形して出力する。（改行は出力しない）|

- 書式文字列

  | 書式文字列 | 概要                     |
  | ---------- | ------------------------ |
  | `%s`       | 文字列                   |
  | `%u`       | 10進数の整数（符号なし） |

- オプションとして認識される文字列も、正常に出力できる。

  ```bash
  printf '%s\n' "$1"
  ```

### seq

- コマンド

  |コマンド|概要|
  |---|---|
  |`seq [開始の数 [増分]] 終了の数`|連続する数字を出力する。|

- オプション

  |オプション|概要|
  |---|---|
  |`-w`|ゼロ埋めを行う。|

### フォントの変更

- 書式

  | 書式                    | 概要                                           | 例            |
  | ----------------------- | ---------------------------------------------- | ------------- |
  | `\e[m`                  | 以降の文字列のフォントをデフォルトに戻す。     | `\e[m`        |
  | `\e[コードm`            | 以降の文字列のフォントを変更する。             | `\e[32m`      |
  | `\e[コード,コード,...m` | 以降の文字列のフォントを変更する。（複数指定） | `\e[3;31;44m` |

- コード

  | コード | 内容                                          |
  | ------ | --------------------------------------------- |
  | 0      | 指定をリセットし未指定状態に戻す（0は省略可） |
  | 1      | 太字                                          |
  | 2      | 薄く表示                                      |
  | 3      | イタリック                                    |
  | 4      | アンダーライン                                |
  | 5      | ブリンク                                      |
  | 6      | 高速ブリンク                                  |
  | 7      | 文字色と背景色の反転                          |
  | 8      | 表示を隠す（コピペ可能）                      |
  | 9      | 取り消し                                      |

- コード（色系）

  | コード（文字色） | コード（背景色） | 色       |
  | ---------------- | ---------------- | -------- |
  | 30               | 40               | 黒       |
  | 31               | 41               | 赤       |
  | 32               | 42               | 緑       |
  | 33               | 43               | 黄色     |
  | 34               | 44               | 青       |
  | 35               | 45               | マゼンダ |
  | 36               | 46               | シアン   |
  | 37               | 47               | 白       |

- [echoコマンドで文字色や背景色を変更する - きり丸の技術日記](https://nainaistar.hatenablog.com/entry/2021/06/11/120000)

## 単純文字列加工

### cut

- コマンド

  |コマンド|概要|
  |---|---|
  |`cut ファイル`|各行の指定した部分を切り出す。|

- オプション

  | オプション      | 概要                                                         |
  | --------------- | ------------------------------------------------------------ |
  | `-c 出力リスト` | 切り出し位置のリストを、**文字数**で指定する。               |
  | `-f 出力リスト` | 切り出し位置のリストを、**区切り文字で分けられたフィールド番号**で指定する。 |
  | `-d 区切り文字` | 区切り文字を指定する。（デフォルトはタブ文字）               |

  - 出力リストは、数字をハイフン・カンマつなぎで指定する。（例：`1, 1-10, -10, 10-, 1,2,3`）

### tr

- コマンド

  |コマンド|概要|例|
  |---|---|---|
  |`tr 置換前 置換後`|文字を**一文字ずつ**置換する。|`tr A-Z a-z`|
  |`tr -d 文字`|文字を削除する。||
  |`tr -s 文字`|文字が連続していた場合1つにまとめる。||
  |`tr -ds 文字`|文字が連続していた場合1つにまとめ、文字を削除する。||

- 文字クラス

  | 文字クラス  | 概要     |
  | ----------- | -------- |
  | `[:alpha:]` | 英字     |
  | `[:lower:]` | 英小文字 |
  | `[:upper:]` | 英大文字 |
  | `[:digit:]` | 数字     |
  | `[:alnum:]` | 英数字   |

## 正規表現文字列加工

### grep

- コマンド

  | コマンド                              | 概要                                   |
  | ------------------------------------- | -------------------------------------- |
  | `grep [検索パターン] [ファイル名...]` | 検索パターンにマッチする行を出力する。 |

- 正規表現変更系オプション

  | オプション | 概要                                                |
  | ---------- | --------------------------------------------------- |
  | `-F`       | 正規表現を使わず検索する。（`fgrep`コマンドと同じ） |
  | `-E`       | 拡張正規表現を使用する。（`egrep`コマンドと同じ）   |
  | `-P`       | Perl拡張を行う。（GNU版のみ）                       |

- 表示系オプション

  | オプション            | 概要                                 |
  | --------------------- | ------------------------------------ |
  | `-c, --count`         | マッチした数のみ表示する。           |
  | `-v, --invert-match`  | マッチしなかった結果のみを表示する。 |
  | `-o, --only-matching` | マッチした部分のみを出力する。       |
  | `-q, --quiet`         | 実行結果を画面に表示しない。         |

- ファイル名の表示系オプション

  | オプション                  | 概要                                             |
  | --------------------------- | ------------------------------------------------ |
  | `-H, --with-filename`       | ファイル名を併せて表示する。                     |
  | `-h, --no-filename`         | ファイル名を非表示にする。（複数ファイル指定時） |
  | `-l, --files-with-matches`  | マッチしたファイル名のみを出力する。             |
  | `-L, --files-without-match` | マッチしなかったファイル名のみを出力する。       |

- その他オプション

  | オプション              | 概要                                                         |
  | ----------------------- | ------------------------------------------------------------ |
  | `-e 検索パターン`       | 検索パターンを追加で指定する。                               |
  | `-f, --file ファイル名` | 検索パターンをファイルから読み込む。                         |
  | `-R, -r, --recursive`   | サブディレクトリを再帰的に検索する。                         |
  | `-i, --ignore-case`     | 大文字小文字を区別しない。（デフォルトでは区別する）         |
  | `-a`                    | テキストファイルであることを明示する。<br />（`binary file matches`と言われた場合などに使用する） |

### sed

- コマンド

  |コマンド|概要|
  |---|---|
  |`sed スクリプトコマンド1[;スクリプトコマンド2;...] [ファイル名...]`|入力をなにかしら処理して出力する。|

- オプション

  | オプション                                  | 概要                                                         |
  | ------------------------------------------- | ------------------------------------------------------------ |
  | `-e スクリプトコマンド`                     | スクリプトコマンドを追加で指定する。                         |
  | `-r`（GNU）<br />`-E`（BSD）                | 拡張正規表現を使用する。                                     |
  | `-i[拡張子]`（GNU）<br />`-i 拡張子`（BSD） | 引数の拡張子でバックアップを取り、ファイルの上書きを行う。<br /><https://it-ojisan.tokyo/mac-linux-sed/> |
  | `-n, --quiet, --silent`                     | 出力コマンド以外の出力を行わない。                           |
  | `-z`                                        | 改行コードを操作する。                                       |

### sedスクリプトコマンド

- sedスクリプトコマンド

  ```text
  [アドレス]コマンド
  ```

- アドレス

  | アドレス     | 概要                   | 例    |
  | ------------ | ---------------------- | ----- |
  | `行`         | 指定行                 | `1`   |
  | `行1,行2`    | 行1から行2までの行     | `1,3` |
  | `$`          | 最終行                 |       |
  | `/正規表現/` | 正規表現に当てはまる行 |       |
  | （省略時）   | 全ての行               |       |

- コマンド

  | コマンド                    | 概要                                                         |
  | --------------------------- | ------------------------------------------------------------ |
  | `i 文字列` ※1,2             | 指定した行の**前に**文字列を追加する。                       |
  | `a 文字列` ※1,2             | 指定した行の**後ろに**文字列を追加する。                     |
  | `c 文字列` ※1,2             | 指定した行を**文字列で置換する**。                           |
  | `d`                         | 指定した行を削除する。                                       |
  | `p`                         | 指定した行を出力する。                                       |
  | `=`                         | 指定した行の行番号を出力する。                               |
  | `y/置換前/置換後/` ※3       | 置換前を置換後の**同じ位置の文字**に置換する。               |
  | `s/置換前/置換後/フラグ` ※3 | 置換前を置換後に置換する。<br /> `&`で文字列全体、`\1, \2, ...`で括弧で囲んだ部分の後方参照／後方置換ができる。 <br />最短一致は使えないので、代わりにクラスの否定を使う。 |

  - ※1 BSDでは、文字列を改行して入力する必要がある。
  - ※2 空白から始まる文字列を指定したい場合は、先頭にバッククォートを付ける。
  - ※3 `y, s`の次の任意の文字がデリミタとなる。（例：`s@置換前@置換後@`）
  - コマンド文字列内で変数展開を行う場合、変数内に改行を含むことはできない。（ベタ書きで改行文字を含むことはできる）
    [sedコマンド](https://www.yutry.net/pc/program/sed-shellscript#mulchline-sed-insert)

- フラグ

  | フラグ | 概要                    |
  | ------ | ----------------------- |
  | `g`    | 1行で複数回置換を行う。 |
  | `p`    | 出力を行う。            |
