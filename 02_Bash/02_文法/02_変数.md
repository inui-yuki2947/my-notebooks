# Bash/文法/変数

## 共通

### 変数の種類

| 変数         | 概要                                                         |
| ------------ | ------------------------------------------------------------ |
| 環境変数     | カレントシェル・サブシェル、及び**子プロセス**で有効である。 |
| シェル変数   | カレントシェル・サブシェルの中で有効である。                 |
| ローカル変数 | それを定義した関数、及び**その関数から呼び出した関数**で有効である。 |

### ドキュメント

- [Bashの変数スコープについてのメモ - Qiita](https://qiita.com/kurukuruz/items/77b329f1c2e5e645de58)
- [シェル変数と環境変数の違い - 座敷牢日誌](https://zashikiro.hateblo.jp/entry/2017/03/31/001900)

## set, declare

### コマンド

| コマンド             | 概要                                         |
| -------------------- | -------------------------------------------- |
| `set`<br />`declare` | 環境変数・シェル変数・関数の一覧を表示する。 |

### オプション（`declare`）

| オプション    | 概要                                     |
| ------------- | ---------------------------------------- |
| `-p [変数名]` | （指定した）シェル変数のみ表示する。     |
| `-f [関数名]` | （指定した）関数の名前と内容を表示する。 |
| `-F [関数名]` | （指定した）関数の名前のみ表示する。     |

## declare, readonly, local

### コマンド

| コマンド                                             | 概要                                 |
| ---------------------------------------------------- | ------------------------------------ |
| `変数名=値`<br />`declare 変数名[=値]`               | シェル変数を作成する。               |
| `declare -r 変数名[=値]`<br />`readonly 変数名[=値]` | 読み取り専用のシェル変数を作成する。 |
| `local 変数名[=値]`                                  | ローカル変数を作成する。             |

## unset

### コマンド

| コマンド               | 概要                   |
| ---------------------- | ---------------------- |
| `unset 変数名や関数名` | 変数や関数を削除する。 |

## env, printenv

### コマンド

| コマンド                     | 概要                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| `env`, `printenv`            | 環境変数の一覧を表示する。                                   |
| `printenv 環境変数名`        | 指定した環境変数を表示する。                                 |
| `[env] 環境変数=値 コマンド` | その1回だけで有効な環境変数を作成して、コマンドを実行する。<br />（コマンド自体にその環境変数を使うと、変数展開の方が早いため、うまく展開されないことに注意） |

### ドキュメント

- [printenv、env、set、exportコマンドの違いに関して](http://tooljp.com/windows/chigai/html/Linux/printenv-env-set-export-chigai.html)

## export

### コマンド

| コマンド             | 概要                                    |
| -------------------- | --------------------------------------- |
| `export`             | 環境変数の一覧を、declare文で表示する。 |
| `export 変数名[=値]` | 環境変数を作成する。                    |

## 特殊変数

### 記法（引数系）

| 記法         | 概要                                                         |
| ------------ | ------------------------------------------------------------ |
| `$n`, `${n}` | n番目の引数<br />10個目以降は`${10}`のように記述する必要がある。 |
| `$#`         | 引数の数                                                     |
| `$@`         | 引数をスペースで連結した文字列                               |
| `$*`         | 引数を区切り文字で連結した文字列                             |

### 記法（その他）

| 記法 | 概要                                       |
| ---- | ------------------------------------------ |
| `$0` | 起動したシェルスクリプトの名前             |
| `$?` | 直前に実行したコマンドの終了ステータス     |
| `$$` | 現在のシェルのプロセスID                   |
| `$!` | バックグラウンドで実行した直前のプロセスID |
