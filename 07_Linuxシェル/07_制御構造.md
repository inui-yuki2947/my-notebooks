# 制御構造

## 条件

### test, [ 条件 ], [[ 条件 ]]

- コマンド

  | 記法                   | AND,OR条件       | その他                                                       |
  | ---------------------- | ---------------- | ------------------------------------------------------------ |
  | `test`<br />`[ 条件 ]` | `-a, -o`を使う。 | `<, >, (, )`などの記号は、クォートする必要がある。           |
  | `[[ 条件 ]]`（推奨）   | `&&, ||`を使う。 | 条件部分で、単語分割は行われない。<br />条件部分で、パス名展開は行われない。（比較時の右辺にある場合を除く） |

- `test, [ 条件 ], [[ 条件 ]]`は、判定した結果を**終了ステータス**として返す。

### 条件

- 文字列評価

  | コマンド             | 概要                                 |
  | -------------------- | ------------------------------------ |
  | `文字列1 = 文字列2`  | 文字列が等しいかどうか               |
  | `文字列1 != 文字列2` | 文字列が等しくないかどうか           |
  | `文字列 =~ 正規表現` | 文字列が正規表現にマッチするかどうか |
  | `-n 文字列`          | 文字列が空文字でないかどうか         |
  | `-z 文字列`          | 文字列が空文字であるかどうか         |

- 整数評価

  | コマンド          | 概要                           |
  | ----------------- | ------------------------------ |
  | `整数1 -eq 整数2` | 整数が等しいかどうか           |
  | `整数1 -ne 整数2` | 整数が等しくないかどうか       |
  | `整数1 -lt 整数2` | 整数1が整数2より小さいかどうか |
  | `整数1 -le 整数2` | 整数1が整数2以下であるかどうか |

- ファイル・ディレクトリ評価

  | コマンド                      | 概要                                             |
  | ----------------------------- | ------------------------------------------------ |
  | `-e パス`                     | パスが存在するかどうか                           |
  | `-f パス`                     | ファイルとして存在するかどうか                   |
  | `-d パス`                     | ディレクトリとして存在するかどうか               |
  | `-L パス`                     | シンボリックリンクとして存在するかどうか。       |
  | `-r, -w, -x パス`             | 読み取り・書き込み・実行権限があるかどうか       |
  | `-nt ファイル名1 ファイル名2` | ファイル1の更新日時がファイル2より新しいかどうか |
  | `-ot ファイル名1 ファイル名2` | ファイル1の更新日時がファイル2より古いかどうか   |

- その他

  | コマンド | 概要                   |
  | -------- | ---------------------- |
  | `-t 0`   | 標準入力が端末であるか |

### true, false, ヌルコマンド

- コマンド

  | コマンド                         | 概要                                |
  | -------------------------------- | ----------------------------------- |
  | `true`<br /> `:`（ヌルコマンド） | 何もせず**終了ステータス0**を返す。 |
  | `false`                          | 何もせず**終了ステータス1**を返す。 |

## 条件分岐

### if

- 複数行で書く場合

  ```bash
  if 条件1; then 
    処理1
  elif 条件2; then
    処理2
  else
    処理3
  fi
  ```

- 1行で書く場合（任意の長さとなる部分の後に`;`を付ける）

  ```bash
  if 条件; then 処理; fi
  ```

- if文では、条件部分の**終了ステータス**をもとに判断する。
- if文の中身は空にできないので、不要な場合はヌルコマンドを置く。

### case

- `case`文は、文字列のパターンに応じて処理を分岐する。

  ```bash
  case 文字列 in
    パターン1) 
      処理1 ;;
    パターン2) 
      処理2 ;;
    ...
  esac
  ```

- パターンとして、ワイルドカードを指定できる。

## 繰り返し

### for

- 書式

  ```bash
  for 変数 in 配列; do 
    処理
  done
  ```

### while, until

- while, until文は、条件の終了ステータスが`0 (1)`である限り、処理が繰り返される。

  ```bash
  while, until 条件; do 
    処理
  done
  ```
