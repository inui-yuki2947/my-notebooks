# コマンド実行

## 共通

### コマンドの種類

| コマンドの種類 | 概要                                     | 例             | マニュアル |
| -------------- | ---------------------------------------- | -------------- | ---------- |
| 内部コマンド   | シェル自体に埋め込まれたコマンド         | `cd`, `echo`   | `help`     |
| 外部コマンド   | 独立したプログラムとして存在するコマンド | `find`, `gzip` | `man`      |

### 優先順

- コマンドは、以下の優先順で実行される。

  1. エイリアス
  2. 内部コマンド
  3. 環境変数`PATH`配下のコマンド（左側から優先）

## PATH

### 概要

- 環境変数`PATH`配下（サブディレクトリを除く）のコマンドは、ファイル名のみを指定して実行できる。

### 書式

```text
パス1:パス2:...
```

### 例

```text
任意のパス:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:
```

## コマンド, eval, bash, exec

### コマンド

| コマンド                     | 概要                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| `コマンド [引数...]`         | **カレントシェル**で、コマンドを実行する。                   |
| `eval コマンド [引数...]`    | **カレントシェル**で、コマンドを実行する。<br />変数の値にパイプやリダイレクトを含む場合も、正常に解釈される。 |
| `bash -c コマンド [引数...]` | **子プロセス**で、コマンドを実行する。                       |
| `exec コマンド [引数...]`    | **現在のプロセス**で、コマンドを実行する。                   |

### ドキュメント

- [技術メモメモ: シェルスクリプトで変数に入れたコマンドを実行する方法の比較(evalコマンドなどの動作比較)](https://tech-mmmm.blogspot.com/2017/11/eval.html)

## source, bash

### コマンド

| コマンド                                                    | 概要                                                         |
| ----------------------------------------------------------- | ------------------------------------------------------------ |
| `. ファイル名 [引数...]`<br />`source ファイル名 [引数...]` | **カレントシェル**で、指定したファイルのコマンドを実行する。 |
| `bash`                                                      | **子プロセス**で、標準入力のコマンドを実行する。             |
| `bash ファイル名 [引数...]`                                 | **子プロセス**で、指定したファイルのコマンドを実行する。     |
| `ファイル名 [引数...]` ※1                                   | **子プロセス**で、指定したファイルのコマンドを実行する。<br />（ファイルの実行権限が必要） |

- ※1 ファイルがカレントディレクトリにある場合は、`./ファイル名 [引数...]`とする必要がある。

## グループコマンド

### コマンド

| 記法                                | 概要                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| `{ コマンド1 ; コマンド2 ; ... ; }` | **カレントシェル**で、複数のコマンドを実行し、まとめて標準出力する。 |
| `( コマンド1 ; コマンド2 ; ... )`   | **サブシェル**で、複数のコマンドを実行し、まとめて標準出力する。 |

### その他

- サブシェルでは、シェル変数・環境変数は引き継がれるが、サブシェル内での変更は反映されない。

## type, which, whereis

### コマンド

| コマンド           | 概要                                                         |
| ------------------ | ------------------------------------------------------------ |
| `type コマンド`    | **実行されるコマンド**を表示する。                           |
| `which コマンド`   | コマンドが**PATHのどこにあるか**を表示する。                 |
| `whereis コマンド` | コマンドのバイナリファイル・ソースコード・マニュアルファイルが置かれている場所を表示する。 |

## builtin, command

### コマンド

| コマンド           | 概要                                               |
| ------------------ | -------------------------------------------------- |
| `builtin コマンド` | 内部コマンドから、コマンドを探して実行する。       |
| `command コマンド` | 内部コマンドとPATHから、コマンドを探して実行する。 |

## オプション

### ドキュメント

- [Linux系システムのコマンドラインオプションについて調べたメモ - Qiita](https://qiita.com/rubytomato@github/items/2ee2fd4127eadc1f1193)

### 記法

- ハイフン1つの場合

  - オプション同士は、連結できる。

    ```bash
    ls -tr
    ```

  - オプション→オプション引数の順は連結でき、オプション引数→オプションの順は連結できない。

    ```bash
    ls -tw100 -r
    ```

- ハイフンが2つの場合

  - オプション引数が必須の場合、半角スペースまたは`=`で区切る。

    ```bash
    ls --sort none
    ls --sort=none
    ```

  - オプション引数が任意の場合、`=`で区切る。

    ```bash
    ls --color=always
    ```

- ハイフンをつける文化の前から存在していたコマンドでは、ハイフンをつけなくてもよいオプションもある。

### コマンド -- 引数

- `--`以降に記述した文字列は、オプションとして解析されなくなる。
